var Carmic = {

    init: function() {


        $(".top-bar").hide();
        $("#header").hide();
        $(".container").addClass("removebg");
        $("#main_background").addClass("removebg");
        document.body.style.backgroundImage='none';
        document.body.style.backgroundColor='#fff';


        navigator.geolocation.getCurrentPosition(
            function(position) {
                var latlng   = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                console.log(latlng)
                latitude = position.coords.latitude;
                longitude = position.coords.longitude;
                var geocoder = new google.maps.Geocoder();
                console.log(latitude, longitude);
                geocoder.geocode({'latLng': latlng},
                    function (results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            if (results[0]) {

                                var address = "", city = "", state = "", zip = "", country = "", formattedAddress = "";
                                var lat;
                                var lng;

                                for (var i = 0; i < results[0].address_components.length; i++) {
                                    var addr = results[0].address_components[i];
                                    // check if this entry in address_components has a type of country
                                    if (addr.types[0] == 'country')
                                        country = addr.long_name;
                                    else if (addr.types[0] == 'street_address') // address 1
                                        address = address + addr.long_name;
                                    else if (addr.types[0] == 'establishment')
                                        address = address + addr.long_name;
                                    else if (addr.types[0] == 'route')  // address 2
                                        address = address + addr.long_name;
                                    else if (addr.types[0] == 'postal_code')       // Zip
                                        zip = addr.short_name;
                                    else if (addr.types[0] == ['administrative_area_level_1'])       // State
                                        state = addr.long_name;
                                    else if (addr.types[0] == ['locality'])       // City
                                        city = addr.long_name;
                                }


                                if (results[0].formatted_address != null) {
                                    formattedAddress = results[0].formatted_address;
                                }

                                //debugger;

                                var location = results[0].geometry.location;

                                lat = location.lat();
                                lng = location.lng();

                                console.log('City: '+ city + '\n' + 'State: '+ state + '\n' + 'Zip: '+ zip + '\n' + 'Formatted Address: '+ formattedAddress + '\n' + 'Lat: '+ lat + '\n' + 'Lng: '+ lng);

                                    $("#country").text(country)
                                    $("#state").text(city)
                                    $("#address").text(formattedAddress)
                            }

                        }

                    });
            }

        );


        (function() {


            function CustomZoomControl(controlDiv, map) {
                //grap the zoom elements from the DOM and insert them in the map
                var controlUIzoomIn= document.getElementById('btn_zoom_in'),
                        controlUIzoomOut= document.getElementById('btn_zoom_out');
                controlDiv.appendChild(controlUIzoomIn);
                controlDiv.appendChild(controlUIzoomOut);

                // Setup the click event listeners and zoom-in or out according to the clicked element
                google.maps.event.addDomListener(controlUIzoomIn, 'click', function() {
                    handler.getMap().setZoom(handler.getMap().getZoom()+1)

                });
                google.maps.event.addDomListener(controlUIzoomOut, 'click', function() {
                    handler.getMap().setZoom(handler.getMap().getZoom()-1)
                });
            }
            window.CustomZoomControl = CustomZoomControl;

        })();


        $("#state").click(function(){
            $('#state').hide();
            $('#address').hide();

            $("#edit_street").val("");
            $("#edit_city").val("");

            $("#edit_street").show();
            $("#edit_city").show();

        })

        $("#address").click(function(){
            $('#address').hide();
            $("#edit_street").val("");
            $("#edit_street").show();
        })



    }







};
