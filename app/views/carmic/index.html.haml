%div{style:"margin-left:80px"}
  = image_tag("CarMask.png",alt: "CarMask",style: 'width:30px;' )
  = image_tag("CarMask.png",alt: "CarMask",style: 'width:30px;background:red;' )
  = image_tag("CarMask.png",alt: "CarMask",style: 'width:30px;background:green' )
  = image_tag("CarMask.png",alt: "CarMask",style: 'width:30px;background:orange' )
  = image_tag("CarMask.png",alt: "CarMask",style: 'width:30px;background:blue' )

%div.carmic_map
  #map


:javascript
   //Carmic.init();

   //setInterval(function() {
   //    //call $.ajax here
   //
   //
   //    console.log("it's me")
   //}, 5000); //5 seconds


          //if(navigator.geolocation)
               //    navigator.geolocation.getCurrentPosition(displayOnMap);


      //function displayOnMap(position){
      //  var marker = handler.addMarker({
      //    lat: position.coords.latitude,
      //    lng: position.coords.longitude
      //  });
      //  //handler.map.centerOn(marker);
      //
      //  handler.bounds.extendWith(marker);
      //  handler.fitMapToBounds();
      //};


      //var map;
      //var path;
      //var marker;
      //
      //function initialize() {
      //    var myLatlng = new google.maps.LatLng(1.317907, 103.843643);
      //    var myOptions = {
      //        zoom: 12,
      //        center: myLatlng
      //    }
      //
      //    map = new google.maps.Map(document.getElementById("map"), myOptions);
      //
      //    route = new google.maps.Polyline({
      //        path: [
      //        new google.maps.LatLng(1.316441,103.88298),
      //        new google.maps.LatLng(1.316441, 103.88298)],
      //        map: map
      //    });
      //
      //    marker = new google.maps.Marker({
      //        position: new google.maps.LatLng(1.316441,103.88298),
      //        map: map
      //    });
      //
      //    counter = 0;
      //    interval = window.setInterval(function () {
      //        counter++;
      //        var pos = new google.maps.LatLng(1.316441,103.88298 + counter / 10000);
      //        marker.setPosition(pos);
      //        if (counter >= 1000) {
      //            window.clearInterval(interval);
      //        }
      //    }, 5);
      //}
      //
      //google.maps.event.addDomListener(window, 'load', initialize);


      handler = Gmaps.build('Google');

      handler.buildMap({ provider: {zoom: 15}, internal: {id: 'map'}}, function(){
      var markers = handler.addMarkers(#{raw @hash.to_json});
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
      handler.getMap().setZoom(15);
      });

