function MarkerClusterer(t,e,i,n,r,o){function a(){if(0!==m.length){var t=[];for(M=0;M<m.length;++M)h.addMarker(m[M],!0,null,null,!0);m=t}}function s(t){return p.getExtent().containsLonLat(t.lonlat)}function c(t){for(var e=t.length,i=[],n=e-1;n>=0;--n)h.addMarker(t[n].marker,!0,t[n].isAdded,i,!0);a()}var l,u=[],p=t,d=null,h=this,f=60,g=[53,56,66,78,90],_=[],m=[],v=null,y=new OpenLayers.Layer.Markers("Cluster Markers"),b=0,k=0,w=0,M=0;for(M=1;5>=M;++M)_.push({url:"assets/map/Raydius_Custom_Markers"+M+".png",height:g[M-1],width:g[M-1]});"object"==typeof i&&null!==i&&("number"==typeof i.gridSize&&i.gridSize>0&&(f=i.gridSize),"number"==typeof i.maxZoom&&(d=i.maxZoom),"object"==typeof i.styles&&null!==i.styles&&0!==i.styles.length&&(_=i.styles)),this.getStyles_=function(){return _},this.clearMarkers=function(){for(var t=0;t<u.length;++t)"undefined"!=typeof u[t]&&null!==u[t]&&u[t].clearMarkers();u=[],m=[],GEvent.removeListener(v)},this.addMarker=function(e,i,n,r,o){if(o!==!0&&!s(e))return void m.push(e);var a=n,c=r,l=p.getPixelFromLonLat(e.lonlat);"boolean"!=typeof a&&(a=!1),("object"!=typeof c||null===c)&&(c=u);for(var d=c.length,h=null,g=d-1;g>=0;g--){h=c[g];var _=h.getCenter();if(null!==_&&(_=p.getPixelFromLonLat(_),l.x>=_.x-f&&l.x<=_.x+f&&l.y>=_.y-f&&l.y<=_.y+f))return h.addMarker({isAdded:a,marker:e}),void(i||h.redraw_())}h=new Cluster(this,t),h.addMarker({isAdded:a,marker:e}),i||h.redraw_(),c.push(h),c!==u&&u.push(h)},this.removeMarker=function(t){for(var e=0;e<u.length;++e)if(u[e].remove(t))return void u[e].redraw_()},this.redraw_=function(){var t=[];l="";for(var e=this.getClustersInViewport_(),i=0;i<e.length;++i){e[i].redraw_(!0);var n=e[i].getMarkers();t[i]=n}for(var r=0;r<t.length;r++)if(0!=t.length)for(var a=0;a<t[r].length;a++)l+=t[r][a].marker.id+",";if(null!=p.getCenter()){var s=p.getCenter().transform(new OpenLayers.Projection("EPSG:900913"),new OpenLayers.Projection("EPSG:4326")),c=s.lat-.0027,u=s.lon,d=new google.maps.LatLng(c,u),h=new google.maps.Geocoder;h.geocode({latLng:d},function(t,e){if(e==google.maps.GeocoderStatus.OK){var i=t[0].formatted_address;$("#address").html(i),$.cookie("address",i,{expires:null,path:"/"})}}),k=c,w=u,data={param_place:l,cur_lat:k,cur_long:w,api_key:o};var f="api/hivev2/get_topic_by_latlon";hiveapp=new Array,hiveapp=gon.hiveapplicaiton,o&&$.ajax({dataType:"json",cache:!1,url:f,data:data,error:function(t,e,i){console.log("Failed to submit : "+e+" ;"+i)},success:function(t){usercount=t.usercount,username=t.activename,avatar=t.avatar,appname=t.appname,topic_id=t.pop_topic.id,title=t.pop_topic.title,topic_count=t.topic_count,post_count=t.post_count,topics_list=t.topics_list;for(var e=[],i=0,n=t.topics_list.length;n>i;i++){var r=t.topics_list[i];e.push(r)}console.log("usercount"),console.log(t.usercount),console.log(o);for(var i=0;i<hiveapp.length;i++)if(o==hiveapp[i].api_key){console.log(hiveapp[i].api_key);var a=hiveapp[i].id;t.usercount>0&&(image='<img src="'+avatar+'"><img/>',$("#usercount"+a).html(usercount),$("#username"+a).html(username),$("#avatar"+a).html(image),console.log("usercount"+a+" : "+usercount),console.log("username"+a+" : "+username),console.log("avatar"+a+" : "+image)),t.topic_count>0&&($("#topiccount"+a).html(topic_count),$("#topictitle"+a).html(title),$("#postcount"+a).html(post_count),$("#postcount"+a).attr("data-topicid",topic_id),$("#postcount"+a).attr("data-postcount",post_count),$("#topiclist"+a).attr("data-topiclist",JSON.stringify(e)))}0==t.usercount&&(image='<img src="assets/Avatars/Chat-Avatar.png"><img/>',$("#usercount"+a).html(0),$("#username"+a).html("no user"),$("#avatar"+a).html(image),console.log("usercount"+a+" : 0"),console.log("username"+a+" : no user"),console.log("avatar"+a+" : "+image)),0==t.topic_count&&($("#topiccount"+a).html(0),$("#topictitle"+a).html("no topic"),$("#postcount"+a).html(0))}})}},this.getClustersInViewport_=function(){for(var t=[],e=p.getExtent(),i=0;i<u.length;i++)u[i].isInBounds(e)&&t.push(u[i]);return t},this.getMaxZoom_=function(){return d},this.getMap_=function(){return p},this.getGridSize_=function(){return f},this.getClusterMarkersLayer=function(){return y},this.getTotalMarkers=function(){for(var t=0,e=0;e<u.length;++e)t+=u[e].getTotalMarkers();return t},this.getTotalClusters=function(){return u.length},this.resetViewport=function(){b++;for(var t=this.getClustersInViewport_(),e=[],i=0,n=0;n<t.length;++n){var r=t[n],o=r.getCurrentZoom();if(null!==o){var a=p.getZoom();if(a!==o){for(var s=r.getMarkers(),l=0;l<s.length;++l){var d={isAdded:!1,marker:s[l].marker};e.push(d)}for(r.clearMarkers(),i++,l=0;l<u.length;++l)r===u[l]&&u.splice(l,1)}}}c(e),this.redraw_()},this.addMarkers=function(t){for(var e=0;e<t.length;++e)this.addMarker(t[e],!0);this.redraw_()},"object"==typeof e&&null!==e&&this.addMarkers(e),p.events.register("moveend",p,function(){h.resetViewport()}),y.setVisibility(!0),p.addLayer(y)}function Cluster(t){var e=null,i=null,n=null,r=null,o=[],a=t,s=t.getMap_(),c=null,l=s.getZoom();this.getMarkers=function(){return o},this.isInBounds=function(i){if(null===e)return!1;i||(i=s.getExtent());var n=s.getPixelFromLonLat(new OpenLayers.LonLat(i.left,i.bottom)),r=s.getPixelFromLonLat(new OpenLayers.LonLat(i.right,i.top)),o=s.getPixelFromLonLat(e),a=!0,c=t.getGridSize_();if(l!==s.getZoom()){var u=s.getZoom()-l;c=Math.pow(2,u)*c}return r.x!==n.x&&(o.x+c<n.x||o.x-c>r.x)&&(a=!1),a&&(o.y+c<r.y||o.y-c>n.y)&&(a=!1),a},this.getCenter=function(){return e},this.addMarker=function(t){null===e&&(e=t.marker.lonlat,i=t.marker.icon,n=t.marker.title,r=t.marker.id),o.push(t)},this.removeMarker=function(t){for(var e=0;e<o.length;++e)if(t===o[e].marker)return o[e].isAdded&&s.removeOverlay(o[e].marker),o.splice(e,1),!0;return!1},this.getCurrentZoom=function(){return l},this.redraw_=function(a){if(a||this.isInBounds()){l=s.getZoom();var u=0,p=t.getMaxZoom_();if(null===p&&(p=s.getNumZoomLevels()),l>=p||1===this.getTotalMarkers())for(u=0;u<o.length;++u)if(o[u].isAdded)o[u].marker.onScreen()||o[u].marker.display();else{var d=new OpenLayers.Marker(e,i.clone());d.icon.imageDiv.title=n,d.events.register("click",d,function(){var t=new Array;t=gon.latestTopics;for(var e,i=0;i<t.length;i++)t[i]&&t[i].place_information.id==r&&(e=t[i].id);var n=new Array;n=document.getElementsByClassName("selected");for(var i=0;i<n.length;i++)document.getElementsByClassName("selected")[i].innerHTML="&nbsp;";var o=new Array,a=0;if(o=document.getElementsByName("topic_lists"),e)for(var i=0;i<o.length;i++){if(o[i].getAttribute("topicID").toString()==e.toString()){o[i].getElementsByClassName("selected")[0].innerHTML="<img height='20px' src='/assets/Pointer.png' width='15px'/>";break}a++}console.log("gon latestTopics;"),console.log(e);var s=0;$.ajax({data:{id:e},success:function(t){var i=$(t),n=i.find("#display_post")[0],r=(new XMLSerializer).serializeToString(n);$("#display_post").replaceWith(r);var o=new Array;o=gon.list_posts;var c=gon.current_user;s=60*a;var l="topics_"+e;console.height=s;var u=$("#display_topic");u&&u.scrollTop(s);new TopicsShow({id:e,posts:o,user_id:c,channel:l})}})}),t.getClusterMarkersLayer().addMarker(d),o[u].isAdded=!0}else{for(u=0;u<o.length;++u)o[u].isAdded&&o[u].marker.onScreen()&&o[u].marker.display();if(null===c){var h=Math.min(this.getTotalMarkers(),40);50>h&&(h=50);var f=new OpenLayers.Size(h,h),g=new OpenLayers.Pixel(-(f.w/2),-f.h),_=new OpenLayers.Icon("/assets/map/Raydius_Custom_Markers3.png",f,g);c=new OpenLayers.Marker(e,_.clone()),c.events.register("click",c,function(){s.setCenter(e,l+1)}),t.getClusterMarkersLayer().addMarker(c)}else{c.onScreen()||c.display(),t.getClusterMarkersLayer().removeMarker(c),c.destroy();var h=Math.min(this.getTotalMarkers(),40);50>h&&(h=50);var f=new OpenLayers.Size(h,h),g=new OpenLayers.Pixel(-(f.w/2),-f.h),_=new OpenLayers.Icon("/assets/map/Raydius_Custom_Markers3.png",f,g);c=new OpenLayers.Marker(e,_.clone()),c.events.register("click",c,function(){s.setCenter(e,l+1)}),t.getClusterMarkersLayer().addMarker(c)}}}},this.clickOnObs=function(){alert("clickOnObs");var t=this,e=s.getPixelFromLonLat(t.marker.lonlat),i=a.getGridSize_(),n=new OpenLayers.Pixel(e.x-i,e.y+i),r=(s.getLonLatFromPixel(n),new OpenLayers.Pixel(e.x+i,e.y-i)),o=(s.getLonLatFromPixel(r),new OpenLayers.Bounds(n.x,n.y,r.x,r.y));s.zoomToExtent(o)},this.clearMarkers=function(){null!==c&&(t.getClusterMarkersLayer().removeMarker(c),c.destroy());for(var e=0;e<o.length;++e)o[e].isAdded&&t.getClusterMarkersLayer().removeMarker(o[e].marker);o=[]},this.getTotalMarkers=function(){return o.length}}function ClusterMarker_(t,e,i,n){for(var r=0,o=e;0!==o;)o=parseInt(o/10,10),r++;i.length<r&&(r=i.length),this.url_=i[r-1].url,this.height_=i[r-1].height,this.width_=i[r-1].width,this.textColor_=i[r-1].opt_textColor,this.anchor_=i[r-1].opt_anchor,this.latlng_=t,this.index_=r,this.styles_=i,this.text_=e,this.padding_=n}function RichMarker(t){var e=t||{};this.ready_=!1,this.dragging_=!1,void 0==t.visible&&(t.visible=!0),void 0==t.shadow&&(t.shadow="7px -3px 5px rgba(88,88,88,0.7)"),void 0==t.anchor&&(t.anchor=RichMarkerPosition.BOTTOM),this.setValues(e)}function MarkerMoveAnimation(t,e){this.name=e.name||"default",this.marker=t;var i=33,e=e||{};e.from=e.from||null,e.to=e.to||null,e.duration=e.duration||1e3,e.effect=e.effect||"linear";var n,r,o,a,s,c;this.stop=function(){clearInterval(c),e.onComplete&&"function"==typeof e.onComplete&&e.onComplete(this)},this.setFrom=function(t){e.from=t,this._updatePositionDiff()},this.setTo=function(t){e.to=t,this._updatePositionDiff()},this.setDuration=function(t){e.duration=t},this.setEffect=function(t){e.effect=t},this.getFrom=function(){return e.from},this.getTo=function(){return e.to},this.getDuration=function(){return e.duration},this.getEffect=function(){return e.effect},this.start=function(){this._check()&&(n=new Date,this._updatePositionDiff(),e.onBeforeStart&&"function"==typeof e.onBeforeStart&&e.onBeforeStart(this),c=setInterval(function(t){t._animate()},i,this))},this._animate=function(){r=new Date-n,o=this._progress(r),a=this._delta(o),1==o?this.stop():this._step(a)},this._progress=function(t){var i=t/e.duration;return i>1?1:i},this._delta=function(t){switch(e.effect){case"linear":default:return t;case"easein":return Math.pow(t,3);case"easeout":return 1-Math.pow(1-t,3)}},this._step=function(t){var i=e.from.lat()+s.lat*t,n=e.from.lng()+s.lng*t;this.marker.getServiceObject().setPosition(new google.maps.LatLng(i,n)),e.onStep&&"function"==typeof e.onStep&&e.onStep(this)},this._check=function(){try{if(!this.marker||!this.marker.getServiceObject().getPosition)throw"NoValidMarkerObject";if(!(e.from&&e.from.lat&&e.to&&e.to.lat))throw"NoValidFromToLatLngObjects";return!0}catch(t){switch(t){case"NoValidMarkerObject":break;case"NoValidFromToLatLngObjects":}this.stop()}},this._updatePositionDiff=function(){s={lat:e.to.lat()-e.from.lat(),lng:e.to.lng()-e.from.lng()}},this.start()}function getLatLongDetail(t){var e=new google.maps.Geocoder;e.geocode({latLng:t},function(t,e){if(e==google.maps.GeocoderStatus.OK&&t[0]){for(var i,n,r="",o="",a="",s="",c="",l="",u=0;u<t[0].address_components.length;u++){var p=t[0].address_components[u];"country"==p.types[0]?c=p.long_name:"street_address"==p.types[0]?r+=p.long_name:"establishment"==p.types[0]?r+=p.long_name:"route"==p.types[0]?r+=p.long_name:"postal_code"==p.types[0]?s=p.short_name:p.types[0]==["administrative_area_level_1"]?a=p.long_name:p.types[0]==["locality"]&&(o=p.long_name)}null!=t[0].formatted_address&&(l=t[0].formatted_address);var d=t[0].geometry.location;i=d.lat(),n=d.lng();var h=$("#country_list").val();return $("#country").text(""!=h?h:c),$("#state").text(o),$("#address").text(l),l}}),window.getLatLongDetail=getLatLongDetail}var Devportal={init:function(){$("#table_list").hide(),$(".btn_adv_option_container").click(function(){$("#table_list").animate({opacity:"show",height:"show"},500),$("#create_application_form").animate({opacity:"show",height:"hide"},500)}),$(".btn_back_option_container").click(function(){for(var t=document.cookie.split(";"),e="status_change=",i=!1,n=0;n<t.length;n++){var r=t[n].trim();0==r.indexOf(e)&&(i=r.substring(e.length,r.length))}var o=!0;if("true"==i&&(o=confirm("Are you sure you want to go back basic options without saving your changes into the database?")?!0:!1),1==o){$("#create_application_form").animate({opacity:"show",height:"show"},500),$("#table_list").animate({opacity:"show",height:"hide"},500),"true"==i&&$.ajax({url:"/clear_columns_changes",success:function(t){var e=$(t),i=e.find("#post_fields_list")[0],n=(new XMLSerializer).serializeToString(i);$("#post_fields_list").replaceWith(n);var i=e.find("#topic_fields_list")[0],n=(new XMLSerializer).serializeToString(i);$("#topic_fields_list").replaceWith(n)}}),$("#create_additional_column_container_post").hide(),main_container=$("#create_additional_column_container_post"),txt_add_col=$(main_container).find("#AppAdditionalColumn_additional_column_name"),txt_add_col.val("");const a=0,s=1,c=2,l=4,u=5,p=6;$("table.add_col_post_list tr").each(function(t,e){$(e).css("background","none");var i=$(e).find("td");$(i[s]).css("color","#FF9B00"),e.selected=!1;var i=$(e).find("td");i[c]&&(i[p].children[0].value=0,i[s].children[0].style.visibility="visible",i[c].children[0].style.visibility="hidden",i[a].children[0].style.visibility="hidden",i[l].children[0].style.visibility="hidden",i[u].children[0].style.visibility="hidden")}),$("table.add_col_topic_list tr").each(function(t,e){$(e).css("background","none");var i=$(e).find("td");$(i[s]).css("color","#FF9B00"),e.selected=!1;var i=$(e).find("td");i[c]&&(i[p].children[0].value=0,i[s].children[0].style.visibility="visible",i[c].children[0].style.visibility="hidden",i[a].children[0].style.visibility="hidden",i[l].children[0].style.visibility="hidden",i[u].children[0].style.visibility="hidden")}),$("#create_additional_column_container_topic").hide(),main_container=$("#create_additional_column_container_topic"),txt_add_col=$(main_container).find("#AppAdditionalColumn_additional_column_name"),txt_add_col.val("")}}),$(".btn_save_additional_field_container").click(function(){$.ajax({url:"/save_columns_changes",success:function(t){alert("successful");var e=$(t),i=e.find("#additional_field_list_container_post")[0],n=(new XMLSerializer).serializeToString(i);$("#additional_field_list_container_post").replaceWith(n);var i=e.find("#additional_field_list_container_topic")[0],n=(new XMLSerializer).serializeToString(i);$("#additional_field_list_container_topic").replaceWith(n),editColumn_Post.init(),editColumn.init()}})});{var t=document.getElementsByTagName("INPUT");$("#dev_portal_theme_color").val()}$("#dev_portal_theme_color").minicolors({});for(var e=0;e<t.length;e++)t[e].oninvalid=function(t){t.target.setCustomValidity(""),t.target.validity.valid||(name=t.target.name,name.indexOf("name")>-1?t.target.setCustomValidity("Application Name field cannot be left blank"):name.indexOf("description")>-1?t.target.setCustomValidity("Application Description field cannot be left blank"):name.indexOf("icon")>-1&&t.target.setCustomValidity("Application Icon file must be uploaded"))},t[e].oninput=function(t){t.target.setCustomValidity("")};this.updateCountdown(),$("#dev_portal_description").change(this.updateCountdown),$("#dev_portal_description").keyup(this.updateCountdown),$("#dev_portal_application_icon").on("change",function(){var t=["jpg","jpeg","gif","png"];if(2==this.value.split(".").length)if(extName=this.value.split(".")[1],-1==$.inArray(extName,t))alert("Invalid upload icon file format"),$("#btn_edit_application").attr("disabled","disabled");else{$("#btn_edit_application").removeAttr("disabled");var e=$(".upload-preview img"),i=this.files[0],n=new FileReader;n.onload=function(t){image_base64=t.target.result,e.attr("src",image_base64)},n.readAsDataURL(i)}})},updateCountdown:function(){var t=255-$("#dev_portal_description").val().length;$("label[for='myalue']").html("( <font color='red'> "+t+"</font> CHARACTERS REMAINING )")}},editColumn={init:function(){$("#create_additional_column_container_topic").hide(),$("#btn_topic_cancel_field_create_container").click(function(){$("#create_additional_column_container_topic").hide()}),$("#btn_topic_add_field_create_container").click(function(){var t=$("#additional_column_name").val();$.ajax({url:"/edit_column",data:{field_id:0,additional_column_name:t,table_name:"Topic"},success:function(t){var e=$(t),i=e.find("#additional_field_list_container_topic")[0],n=(new XMLSerializer).serializeToString(i);$("#additional_field_list_container_topic").replaceWith(n),$("#additional_column_name").val(""),$("#create_additional_column_container_topic").hide();var r=$("#topic_fields_list").height();$("#list_of_topic_fields_container").scrollTop(r),editColumn.init()}})}),$("#btn_topic_new_field_container").click(function(){$("#create_additional_column_container_topic").show(),main_container=$("#create_additional_column_container_topic");var t=$("#topic_fields_list").height();$("#list_of_topic_fields_container").scrollTop(t),txt_add_col=$(main_container).find("#AppAdditionalColumn_additional_column_name"),txt_add_col.val("");const e=0,i=1,n=2,r=4,o=5,a=6;$("table.add_col_topic_list tr").each(function(t,s){$(s).css("background","none");var c=$(s).find("td");$(c[i]).css("color","#FF9B00"),s.selected=!1;var c=$(s).find("td");c[n]&&(c[a].children[0].value=0,c[i].children[0].style.visibility="visible",c[n].children[0].style.visibility="hidden",c[e].children[0].style.visibility="hidden",c[r].children[0].style.visibility="hidden",c[o].children[0].style.visibility="hidden")})}),$("#add_new_column_form").submit(function(t){t.preventDefault();var e=$(this),i=e.find('input[name="s"]').val(),n=e.attr("action"),r=$.post(n,{s:i});r.done(function(){$.ajax({success:function(t){var e=$(t),i=e.find("#additional_field_list_container_topic")[0],n=(new XMLSerializer).serializeToString(i);$("#additional_field_list_container_topic").replaceWith(n),$("#create_additional_column_container_topic").hide(),editColumn.init()}})})}),$("table.add_col_topic_list tr").click(function(){const t=0,e=1,i=2,n=4,r=5,o=6;var a=$(this).find("td");$("table.add_col_topic_list tr").each(function(t,i){$(i).css("background","none");var n=$(i).find("td");$(n[e]).css("color","#FF9B00"),i.selected=!1}),$("#create_additional_column_container_topic").hide(),this.selected=!0,$(this).css("background-color","#FDAF37"),$(a[e]).css("color","white"),$("table.add_col_topic_list tr").each(function(a,s){if(!s.selected){var c=$(s).find("td");c[i]&&(c[o].children[0].value=0,c[e].children[0].style.visibility="visible",c[i].children[0].style.visibility="hidden",c[t].children[0].style.visibility="hidden",c[n].children[0].style.visibility="hidden",c[r].children[0].style.visibility="hidden")}}),img_edit_item=a[i].children[0],$(img_edit_item).click(function(){a[o].children[0].value=1,a[e].children[0].style.visibility="hidden",a[i].children[0].style.visibility="hidden",a[t].children[0].style.visibility="visible",a[n].children[0].style.visibility="visible",a[r].children[0].style.visibility="visible"})}),$("table.add_col_topic_list tr td").click(function(){const t=0,e=2,i=3,n=4,r=5,o=6;var a=$(this).parent().children().index($(this)),s=$(this).parent(),c=$(s).find("td");img_edit_item=c[e].children[0],btn_save_item=c[n].children[0],btn_del_item=c[r].children[0];var l=0;if(l=c[o].children[0].value,1!=l&&(img_edit_item.style.visibility="visible",c[o].children[0].value=0),a==r&&"visible"==btn_del_item.style.visibility&&(field_id=c[i].children[0].value,field_id&&0!=field_id&&(console.log("call ajax"),$.ajax({url:"/delete_additional_column",data:{field_id:field_id,table_name:"Topic"},success:function(t){var e=$(t),i=e.find("#additional_field_list_container_topic")[0],n=(new XMLSerializer).serializeToString(i);$("#additional_field_list_container_topic").replaceWith(n),$("#additional_column_name").val(""),editColumn.init()}}))),a==n&&"visible"==btn_save_item.style.visibility&&(field_id=c[i].children[0].value,field_id&&0!=field_id)){var u=c[t].children[0].value;u.length>0?$.ajax({url:"/update_additional_column",data:{field_id:field_id,column_name:u,table_name:"Topic"},success:function(t){var e=$(t),i=e.find("#additional_field_list_container_topic")[0],n=(new XMLSerializer).serializeToString(i);$("#additional_field_list_container_topic").replaceWith(n),$("#additional_column_name").val(""),editColumn.init()}}):alert("Please Enter New Column Name")}})}},EditTopicPost={init:function(){$("table.add_col_topic_list tr td").click(function(){const t=0,e=1,i=2,n=4;var r=$(this).parent().children().index($(this)),o=$(this).parent(),a=$(o).find("td");r==e&&(topic_id=a[i].children[0].value,$.ajax({url:"/delete_topic",data:{topic_id:topic_id},success:function(t){var e=$(t),i=e.find("#list_of_topic_fields_container")[0],n=(new XMLSerializer).serializeToString(i);$("#list_of_topic_fields_container").replaceWith(n),i=e.find("#list_of_post_fields_container")[0],n=(new XMLSerializer).serializeToString(i),$("#list_of_post_fields_container").replaceWith(n),EditTopicPost.init()}})),r==t&&(edit_link=a[t].children[0],topic_id=a[i].children[0].value,title=a[n].children[0],topic_title=a[n].children[0].value,"Edit"==$(edit_link)[0].innerHTML.trim()?(title.style.visibility="visible",$(edit_link)[0].innerHTML="Save"):$.ajax({url:"/edit_topic",data:{topic_id:topic_id,topic_title:topic_title},success:function(t){var e=$(t),i=e.find("#list_of_topic_fields_container")[0],n=(new XMLSerializer).serializeToString(i);$("#list_of_topic_fields_container").replaceWith(n),title.style.visibility="hidden",$(edit_link)[0].innerHTML="Edit",EditTopicPost.init()}}))}),$("table.add_col_post_list tr td").click(function(){const t=0,e=1,i=2,n=4;var r=$(this).parent().children().index($(this)),o=$(this).parent(),a=$(o).find("td");r==e&&(post_id=a[i].children[0].value,$.ajax({url:"/delete_post",data:{post_id:post_id},success:function(t){var e=$(t);output=e.find("#list_of_post_fields_container")[0],testing=(new XMLSerializer).serializeToString(output),$("#list_of_post_fields_container").replaceWith(testing),EditTopicPost.init()}})),r==t&&(edit_link=a[t].children[0],post_id=a[i].children[0].value,content=a[n].children[0],post_content=a[n].children[0].value,"Edit"==$(edit_link)[0].innerHTML.trim()?(content.style.visibility="visible",$(edit_link)[0].innerHTML="Save"):$.ajax({url:"/edit_post",data:{post_id:post_id,post_content:post_content},success:function(t){var e=$(t),i=e.find("#list_of_post_fields_container")[0],n=(new XMLSerializer).serializeToString(i);$("#list_of_post_fields_container").replaceWith(n),content.style.visibility="hidden",$(edit_link)[0].innerHTML="Edit",EditTopicPost.init()}}))})}},editColumn_Post={init:function(){$("#create_additional_column_container_post").hide(),$("#btn_post_cancel_field_create_container").click(function(){$("#create_additional_column_container_post").hide()}),$("#btn_post_add_field_create_container").click(function(){var t=$("#post_additional_column_name").val();$.ajax({url:"/edit_column",data:{field_id:0,additional_column_name:t,table_name:"Post"},success:function(t){var e=$(t),i=e.find("#additional_field_list_container_post")[0],n=(new XMLSerializer).serializeToString(i);$("#additional_field_list_container_post").replaceWith(n),$("#post_additional_column_name").val(""),$("#create_additional_column_container_post").hide();var r=$("#post_fields_list").height();$("#list_of_post_fields_container").scrollTop(r),editColumn_Post.init()}})}),$("#btn_post_new_field_container").click(function(){$("#create_additional_column_container_post").show();var t=$("#post_fields_list").height();$("#list_of_post_fields_container").scrollTop(t),main_container=$("#create_additional_column_container_post"),txt_add_col=$(main_container).find("#AppAdditionalColumn_additional_column_name"),txt_add_col.val("");const e=0,i=1,n=2,r=4,o=5,a=6;$("table.add_col_post_list tr").each(function(t,s){$(s).css("background","none");var c=$(s).find("td");$(c[i]).css("color","#FF9B00"),s.selected=!1;var c=$(s).find("td");c[n]&&(c[a].children[0].value=0,c[i].children[0].style.visibility="visible",c[n].children[0].style.visibility="hidden",c[e].children[0].style.visibility="hidden",c[r].children[0].style.visibility="hidden",c[o].children[0].style.visibility="hidden")})}),$("#add_new_column_form_post").submit(function(t){t.preventDefault();var e=$(this),i=e.find('input[name="s"]').val(),n=e.attr("action"),r=$.post(n,{s:i});r.done(function(){$.ajax({success:function(t){var e=$(t),i=e.find("#additional_field_list_container_post")[0],n=(new XMLSerializer).serializeToString(i);$("#additional_field_list_container_post").replaceWith(n),$("#create_additional_column_container_post").hide(),editColumn_Post.init()}})})}),$("table.add_col_post_list tr").click(function(){const t=0,e=1,i=2,n=4,r=5,o=6;{var a=$(this).find("td");$("table.add_col_post_list tr").length}$("table.add_col_post_list tr").each(function(t,i){$(i).css("background","none");var n=$(i).find("td");$(n[e]).css("color","#FF9B00"),i.selected=!1}),$("#create_additional_column_container_post").hide(),this.selected=!0,$(this).css("background-color","#FDAF37"),$(a[e]).css("color","white"),$("table.add_col_post_list tr").each(function(a,s){if(!s.selected){var c=$(s).find("td");c[i]&&(c[o].children[0].value=0,c[e].children[0].style.visibility="visible",c[i].children[0].style.visibility="hidden",c[t].children[0].style.visibility="hidden",c[n].children[0].style.visibility="hidden",c[r].children[0].style.visibility="hidden")}}),img_edit_item=a[i].children[0],$(img_edit_item).click(function(){a[o].children[0].value=1,a[e].children[0].style.visibility="hidden",a[i].children[0].style.visibility="hidden",a[t].children[0].style.visibility="visible",a[n].children[0].style.visibility="visible",a[r].children[0].style.visibility="visible"})}),$("table.add_col_post_list tr td").click(function(){const t=0,e=2,i=3,n=4,r=5,o=6;var a=$(this).parent().children().index($(this)),s=$(this).parent(),c=$(s).find("td");img_edit_item=c[e].children[0],btn_save_item=c[n].children[0],btn_del_item=c[r].children[0];var l=0;if(l=c[o].children[0].value,1!=l&&(img_edit_item.style.visibility="visible",c[o].children[0].value=0),a==r&&"visible"==btn_del_item.style.visibility&&(field_id=c[i].children[0].value,field_id&&0!=field_id&&$.ajax({url:"/delete_additional_column",data:{field_id:field_id,table_name:"Post"},success:function(t){var e=$(t),i=e.find("#additional_field_list_container_post")[0],n=(new XMLSerializer).serializeToString(i);$("#additional_field_list_container_post").replaceWith(n),$("#AppAdditionalColumn_additional_column_name").val(""),editColumn_Post.init()}})),a==n&&"visible"==btn_save_item.style.visibility&&(field_id=c[i].children[0].value,field_id&&0!=field_id)){var u=c[t].children[0].value;u.length>0?$.ajax({url:"/update_additional_column",data:{field_id:field_id,column_name:u,table_name:"Post"},success:function(t){var e=$(t),i=e.find("#additional_field_list_container_post")[0],n=(new XMLSerializer).serializeToString(i);$("#additional_field_list_container_post").replaceWith(n),$("#AppAdditionalColumn_additional_column_name").val(""),editColumn_Post.init()}}):alert("Please Enter New Column Name")}})}},Applicationlist={init:function(){$("tr[data-link]").click(function(){window.location=this.dataset.link})}};!function(t){t.cookie=function(e,i,n){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(i))||null===i||void 0===i)){if(n=t.extend({},n),(null===i||void 0===i)&&(n.expires=-1),"number"==typeof n.expires){var r=n.expires,o=n.expires=new Date;o.setDate(o.getDate()+r)}return i=String(i),document.cookie=[encodeURIComponent(e),"=",n.raw?i:encodeURIComponent(i)].join("")}n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":"",n=i||{};for(var a,s=n.raw?function(t){return t}:decodeURIComponent,c=document.cookie.split("; "),l=0;a=c[l]&&c[l].split("=");l++)if(s(a[0])===e)return s(a[1]||"");return null}}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(e,i){var n,r,o,a,s,l=t('<div class="minicolors" />'),u=t.minicolors.defaults;if(!e.data("minicolors-initialized")){if(i=t.extend(!0,{},u,i),l.addClass("minicolors-theme-"+i.theme).toggleClass("minicolors-with-opacity",i.opacity),void 0!==i.position&&t.each(i.position.split(" "),function(){l.addClass("minicolors-position-"+this)}),n="rgb"===i.format?i.opacity?"25":"20":i.keywords?"11":"7",e.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",i).prop("size",n).wrap(l).after('<div class="minicolors-panel minicolors-slider-'+i.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),i.inline||(e.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),e.next(".minicolors-input-swatch").on("click",function(t){t.preventDefault(),e.focus()})),a=e.parent().find(".minicolors-panel"),a.on("selectstart",function(){return!1}).end(),i.swatches&&0!==i.swatches.length)for(a.addClass("minicolors-with-swatches"),r=t('<ul class="minicolors-swatches"></ul>').appendTo(a),s=0;s<i.swatches.length;++s)o=i.swatches[s],o=m(o)?f(o,!0):$(h(o,!0)),t('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(r).data("swatch-color",i.swatches[s]).find(".minicolors-swatch-color").css({backgroundColor:k(o),opacity:o.a}),i.swatches[s]=o;i.inline&&e.parent().addClass("minicolors-inline"),c(e,!1),e.data("minicolors-initialized",!0)}}function i(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),e.before(t).remove()}function n(t){var e=t.parent(),i=e.find(".minicolors-panel"),n=t.data("minicolors-settings");!t.data("minicolors-initialized")||t.prop("disabled")||e.hasClass("minicolors-inline")||e.hasClass("minicolors-focus")||(r(),e.addClass("minicolors-focus"),i.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(t.get(0))}))}function r(){t(".minicolors-focus").each(function(){var e=t(this),i=e.find(".minicolors-input"),n=e.find(".minicolors-panel"),r=i.data("minicolors-settings");n.fadeOut(r.hideSpeed,function(){r.hide&&r.hide.call(i.get(0)),e.removeClass("minicolors-focus")})})}function o(t,e,i){var n,r,o,s,c=t.parents(".minicolors").find(".minicolors-input"),l=c.data("minicolors-settings"),u=t.find("[class$=-picker]"),p=t.offset().left,d=t.offset().top,h=Math.round(e.pageX-p),f=Math.round(e.pageY-d),g=i?l.animationSpeed:0;e.originalEvent.changedTouches&&(h=e.originalEvent.changedTouches[0].pageX-p,f=e.originalEvent.changedTouches[0].pageY-d),0>h&&(h=0),0>f&&(f=0),h>t.width()&&(h=t.width()),f>t.height()&&(f=t.height()),t.parent().is(".minicolors-slider-wheel")&&u.parent().is(".minicolors-grid")&&(n=75-h,r=75-f,o=Math.sqrt(n*n+r*r),s=Math.atan2(r,n),0>s&&(s+=2*Math.PI),o>75&&(o=75,h=75-75*Math.cos(s),f=75-75*Math.sin(s)),h=Math.round(h),f=Math.round(f)),t.is(".minicolors-grid")?u.stop(!0).animate({top:f+"px",left:h+"px"},g,l.animationEasing,function(){a(c,t)}):u.stop(!0).animate({top:f+"px"},g,l.animationEasing,function(){a(c,t)})}function a(t,e){function i(t,e){var i,n;return t.length&&e?(i=t.offset().left,n=t.offset().top,{x:i-e.offset().left+t.outerWidth()/2,y:n-e.offset().top+t.outerHeight()/2}):null}var n,r,o,a,c,u,p,d=t.val(),h=t.attr("data-opacity"),f=t.parent(),g=t.data("minicolors-settings"),m=f.find(".minicolors-input-swatch"),v=f.find(".minicolors-grid"),y=f.find(".minicolors-slider"),b=f.find(".minicolors-opacity-slider"),k=v.find("[class$=-picker]"),M=y.find("[class$=-picker]"),x=b.find("[class$=-picker]"),$=i(k,v),O=i(M,y),C=i(x,b);if(e.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(g.control){case"wheel":a=v.width()/2-$.x,c=v.height()/2-$.y,u=Math.sqrt(a*a+c*c),p=Math.atan2(c,a),0>p&&(p+=2*Math.PI),u>75&&(u=75,$.x=69-75*Math.cos(p),$.y=69-75*Math.sin(p)),r=_(u/.75,0,100),n=_(180*p/Math.PI,0,360),o=_(100-Math.floor(O.y*(100/y.height())),0,100),d=w({h:n,s:r,b:o}),y.css("backgroundColor",w({h:n,s:r,b:100}));break;case"saturation":n=_(parseInt($.x*(360/v.width()),10),0,360),r=_(100-Math.floor(O.y*(100/y.height())),0,100),o=_(100-Math.floor($.y*(100/v.height())),0,100),d=w({h:n,s:r,b:o}),y.css("backgroundColor",w({h:n,s:100,b:o})),f.find(".minicolors-grid-inner").css("opacity",r/100);
break;case"brightness":n=_(parseInt($.x*(360/v.width()),10),0,360),r=_(100-Math.floor($.y*(100/v.height())),0,100),o=_(100-Math.floor(O.y*(100/y.height())),0,100),d=w({h:n,s:r,b:o}),y.css("backgroundColor",w({h:n,s:r,b:100})),f.find(".minicolors-grid-inner").css("opacity",1-o/100);break;default:n=_(360-parseInt(O.y*(360/y.height()),10),0,360),r=_(Math.floor($.x*(100/v.width())),0,100),o=_(100-Math.floor($.y*(100/v.height())),0,100),d=w({h:n,s:r,b:o}),v.css("backgroundColor",w({h:n,s:100,b:100}))}h=g.opacity?parseFloat(1-C.y/b.height()).toFixed(2):1,s(t,d,h)}else m.find("span").css({backgroundColor:d,opacity:h}),l(t,d,h)}function s(t,e,i){var n,r=t.parent(),o=t.data("minicolors-settings"),a=r.find(".minicolors-input-swatch");o.opacity&&t.attr("data-opacity",i),"rgb"===o.format?(n=m(e)?f(e,!0):$(h(e,!0)),i=""===t.attr("data-opacity")?1:_(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),(isNaN(i)||!o.opacity)&&(i=1),e=t.minicolors("rgbObject").a<=1&&n&&o.opacity?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(i)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):(m(e)&&(e=b(e)),e=d(e,o.letterCase)),t.val(e),a.find("span").css({backgroundColor:e,opacity:i}),l(t,e,i)}function c(e,i){var n,r,o,a,s,c,u,p,y,k,x=e.parent(),$=e.data("minicolors-settings"),O=x.find(".minicolors-input-swatch"),C=x.find(".minicolors-grid"),L=x.find(".minicolors-slider"),j=x.find(".minicolors-opacity-slider"),S=C.find("[class$=-picker]"),R=L.find("[class$=-picker]"),T=j.find("[class$=-picker]");switch(m(e.val())?(n=b(e.val()),s=_(parseFloat(v(e.val())).toFixed(2),0,1),s&&e.attr("data-opacity",s)):n=d(h(e.val(),!0),$.letterCase),n||(n=d(g($.defaultValue,!0),$.letterCase)),r=M(n),a=$.keywords?t.map($.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],c=""!==e.val()&&t.inArray(e.val().toLowerCase(),a)>-1?d(e.val()):m(e.val())?f(e.val()):n,i||e.val(c),$.opacity&&(o=""===e.attr("data-opacity")?1:_(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),isNaN(o)&&(o=1),e.attr("data-opacity",o),O.find("span").css("opacity",o),p=_(j.height()-j.height()*o,0,j.height()),T.css("top",p+"px")),"transparent"===e.val().toLowerCase()&&O.find("span").css("opacity",0),O.find("span").css("backgroundColor",n),$.control){case"wheel":y=_(Math.ceil(.75*r.s),0,C.height()/2),k=r.h*Math.PI/180,u=_(75-Math.cos(k)*y,0,C.width()),p=_(75-Math.sin(k)*y,0,C.height()),S.css({top:p+"px",left:u+"px"}),p=150-r.b/(100/C.height()),""===n&&(p=0),R.css("top",p+"px"),L.css("backgroundColor",w({h:r.h,s:r.s,b:100}));break;case"saturation":u=_(5*r.h/12,0,150),p=_(C.height()-Math.ceil(r.b/(100/C.height())),0,C.height()),S.css({top:p+"px",left:u+"px"}),p=_(L.height()-r.s*(L.height()/100),0,L.height()),R.css("top",p+"px"),L.css("backgroundColor",w({h:r.h,s:100,b:r.b})),x.find(".minicolors-grid-inner").css("opacity",r.s/100);break;case"brightness":u=_(5*r.h/12,0,150),p=_(C.height()-Math.ceil(r.s/(100/C.height())),0,C.height()),S.css({top:p+"px",left:u+"px"}),p=_(L.height()-r.b*(L.height()/100),0,L.height()),R.css("top",p+"px"),L.css("backgroundColor",w({h:r.h,s:r.s,b:100})),x.find(".minicolors-grid-inner").css("opacity",1-r.b/100);break;default:u=_(Math.ceil(r.s/(100/C.width())),0,C.width()),p=_(C.height()-Math.ceil(r.b/(100/C.height())),0,C.height()),S.css({top:p+"px",left:u+"px"}),p=_(L.height()-r.h/(360/L.height()),0,L.height()),R.css("top",p+"px"),C.css("backgroundColor",w({h:r.h,s:100,b:100}))}e.data("minicolors-initialized")&&l(e,c,o)}function l(t,e,i){var n,r,o,a=t.data("minicolors-settings"),s=t.data("minicolors-lastChange");if(!s||s.value!==e||s.opacity!==i){if(t.data("minicolors-lastChange",{value:e,opacity:i}),a.swatches&&0!==a.swatches.length){for(n=m(e)?f(e,!0):$(e),r=-1,o=0;o<a.swatches.length;++o)if(n.r===a.swatches[o].r&&n.g===a.swatches[o].g&&n.b===a.swatches[o].b&&n.a===a.swatches[o].a){r=o;break}t.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==r&&t.parent().find(".minicolors-swatches .minicolors-swatch").eq(o).addClass("selected")}a.change&&(a.changeDelay?(clearTimeout(t.data("minicolors-changeTimeout")),t.data("minicolors-changeTimeout",setTimeout(function(){a.change.call(t.get(0),e,i)},a.changeDelay))):a.change.call(t.get(0),e,i)),t.trigger("change").trigger("input")}}function u(e){var i,n=t(e).attr("data-opacity");if(m(t(e).val()))i=f(t(e).val(),!0);else{var r=h(t(e).val(),!0);i=$(r)}return i?(void 0!==n&&t.extend(i,{a:parseFloat(n)}),i):null}function p(e,i){var n,r=t(e).attr("data-opacity");if(m(t(e).val()))n=f(t(e).val(),!0);else{var o=h(t(e).val(),!0);n=$(o)}return n?(void 0===r&&(r=1),i?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(r)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):null}function d(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function h(t,e){return t=t.replace(/^#/g,""),t.match(/^[A-F0-9]{3,6}/gi)?3!==t.length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t):""}function f(t,e){var i=t.replace(/[^\d,.]/g,""),n=i.split(",");return n[0]=_(parseInt(n[0],10),0,255),n[1]=_(parseInt(n[1],10),0,255),n[2]=_(parseInt(n[2],10),0,255),n[3]&&(n[3]=_(parseFloat(n[3],10),0,1)),e?n[3]?{r:n[0],g:n[1],b:n[2],a:n[3]}:{r:n[0],g:n[1],b:n[2]}:"undefined"!=typeof n[3]&&n[3]<=1?"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")":"rgb("+n[0]+", "+n[1]+", "+n[2]+")"}function g(t,e){return m(t)?f(t):h(t,e)}function _(t,e,i){return e>t&&(t=e),t>i&&(t=i),t}function m(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e&&4===e.length?!0:!1}function v(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i),t&&6===t.length?t[4]:"1"}function y(t){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),r=Math.round(255*t.b/100);if(0===n)e.r=e.g=e.b=r;else{var o=r,a=(255-n)*r/255,s=(o-a)*(i%60)/60;360===i&&(i=0),60>i?(e.r=o,e.b=a,e.g=a+s):120>i?(e.g=o,e.b=a,e.r=o-s):180>i?(e.g=o,e.r=a,e.b=a+s):240>i?(e.b=o,e.r=a,e.g=o-s):300>i?(e.b=o,e.g=a,e.r=a+s):360>i?(e.r=o,e.g=a,e.b=o-s):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}function b(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}function k(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(i,function(t,e){1===e.length&&(i[t]="0"+e)}),"#"+i.join("")}function w(t){return k(y(t))}function M(t){var e=x($(t));return 0===e.s&&(e.h=360),e}function x(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),r=n-i;return e.b=n,e.s=0!==n?255*r/n:0,e.h=0!==e.s?t.r===n?(t.g-t.b)/r:t.g===n?2+(t.b-t.r)/r:4+(t.r-t.g)/r:-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e}function $(t){return t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16),{r:t>>16,g:(65280&t)>>8,b:255&t}}t.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},t.extend(t.fn,{minicolors:function(o,a){switch(o){case"destroy":return t(this).each(function(){i(t(this))}),t(this);case"hide":return r(),t(this);case"opacity":return void 0===a?t(this).attr("data-opacity"):(t(this).each(function(){c(t(this).attr("data-opacity",a))}),t(this));case"rgbObject":return u(t(this),"rgbaObject"===o);case"rgbString":case"rgbaString":return p(t(this),"rgbaString"===o);case"settings":return void 0===a?t(this).data("minicolors-settings"):(t(this).each(function(){var e=t(this).data("minicolors-settings")||{};i(t(this)),t(this).minicolors(t.extend(!0,e,a))}),t(this));case"show":return n(t(this).eq(0)),t(this);case"value":return void 0===a?t(this).val():(t(this).each(function(){"object"==typeof a&&"null"!==a?(a.opacity&&t(this).attr("data-opacity",_(a.opacity,0,1)),a.color&&t(this).val(a.color)):t(this).val(a),c(t(this))}),t(this));default:return"create"!==o&&(a=o),t(this).each(function(){e(t(this),a)}),t(this)}}}),t([document]).on("mousedown.minicolors touchstart.minicolors",function(e){t(e.target).parents().add(e.target).hasClass("minicolors")||r()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var i=t(this);e.preventDefault(),t(e.delegateTarget).data("minicolors-target",i),o(i,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var i=t(e.delegateTarget).data("minicolors-target");i&&o(i,e)}).on("mouseup.minicolors touchend.minicolors",function(){t(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(e){e.preventDefault();var i=t(this),n=i.parents(".minicolors").find(".minicolors-input"),r=i.data("swatch-color");s(n,r,v(r)),c(n)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(e){var i=t(this).parent().find(".minicolors-input");e.preventDefault(),n(i)}).on("focus.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&n(e)}).on("blur.minicolors",".minicolors-input",function(){var e,i,n,r,o,a=t(this),s=a.data("minicolors-settings");a.data("minicolors-initialized")&&(e=s.keywords?t.map(s.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],""!==a.val()&&t.inArray(a.val().toLowerCase(),e)>-1?o=a.val():(m(a.val())?n=f(a.val(),!0):(i=h(a.val(),!0),n=i?$(i):null),o=null===n?s.defaultValue:"rgb"===s.format?f(s.opacity?"rgba("+n.r+","+n.g+","+n.b+","+a.attr("data-opacity")+")":"rgb("+n.r+","+n.g+","+n.b+")"):k(n)),r=s.opacity?a.attr("data-opacity"):1,"transparent"===o.toLowerCase()&&(r=0),a.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",r),a.val(o),""===a.val()&&a.val(g(s.defaultValue,!0)),a.val(d(a.val(),s.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var i=t(this);if(i.data("minicolors-initialized"))switch(e.keyCode){case 9:r();break;case 13:case 27:r(),i.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&c(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&setTimeout(function(){c(e,!0)},1)})}),ClusterMarker_.prototype.initialize=function(t){this.map_=t;var e=document.createElement("div"),i=this.latlng_,n=t.fromLatLngToDivPixel(i);n.x-=parseInt(this.width_/2,10),n.y-=parseInt(this.height_/2,10);var r="";r=document.all?'filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="'+this.url_+'");':"background:url("+this.url_+");","object"==typeof this.anchor_?(r+="number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?"height:"+(this.height_-this.anchor_[0])+"px;padding-top:"+this.anchor_[0]+"px;":"height:"+this.height_+"px;line-height:"+this.height_+"px;",r+="number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?"width:"+(this.width_-this.anchor_[1])+"px;padding-left:"+this.anchor_[1]+"px;":"width:"+this.width_+"px;text-align:center;"):(r+="height:"+this.height_+"px;line-height:"+this.height_+"px;",r+="width:"+this.width_+"px;text-align:center;");var o=this.textColor_?this.textColor_:"black";e.style.cssText=r+"cursor:pointer;top:"+n.y+"px;left:"+n.x+"px;color:"+o+";position:absolute;font-size:11px;font-family:Arial,sans-serif;font-weight:bold",e.innerHTML=this.text_,t.getPane(G_MAP_MAP_PANE).appendChild(e);var a=this.padding_;GEvent.addDomListener(e,"click",function(){var e=t.fromLatLngToDivPixel(i),n=new GPoint(e.x-a,e.y+a);n=t.fromDivPixelToLatLng(n);var r=new GPoint(e.x+a,e.y-a);r=t.fromDivPixelToLatLng(r);var o=t.getBoundsZoomLevel(new GLatLngBounds(n,r),t.getSize());t.setCenter(i,o)}),this.div_=e},ClusterMarker_.prototype.remove=function(){this.div_.parentNode.removeChild(this.div_)},ClusterMarker_.prototype.copy=function(){return new ClusterMarker_(this.latlng_,this.index_,this.text_,this.styles_,this.padding_)},ClusterMarker_.prototype.redraw=function(t){if(t){var e=this.map_.getPixelFromLonLat(this.latlng_);e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10),this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterMarker_.prototype.hide=function(){this.div_.style.display="none"},ClusterMarker_.prototype.show=function(){this.div_.style.display=""},ClusterMarker_.prototype.isHidden=function(){return"none"===this.div_.style.display},function(){function t(t){function e(e,i,n,r,o,a){for(;o>=0&&a>o;o+=t){var s=r?r[o]:o;n=i(n,e[s],s,e)}return n}return function(i,n,r,o){n=y(n,o,4);var a=!O(i)&&v.keys(i),s=(a||i).length,c=t>0?0:s-1;return arguments.length<3&&(r=i[a?a[c]:c],c+=t),e(i,n,r,a,c,s)}}function e(t){return function(e,i,n){i=b(i,n);for(var r=$(e),o=t>0?0:r-1;o>=0&&r>o;o+=t)if(i(e[o],o,e))return o;return-1}}function i(t,e,i){return function(n,r,o){var a=0,s=$(n);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(i&&o&&s)return o=i(n,r),n[o]===r?o:-1;if(r!==r)return o=e(u.call(n,a,s),v.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&s>o;o+=t)if(n[o]===r)return o;return-1}}function n(t,e){var i=R.length,n=t.constructor,r=v.isFunction(n)&&n.prototype||s,o="constructor";for(v.has(t,o)&&!v.contains(e,o)&&e.push(o);i--;)o=R[i],o in t&&t[o]!==r[o]&&!v.contains(e,o)&&e.push(o)}var r=this,o=r._,a=Array.prototype,s=Object.prototype,c=Function.prototype,l=a.push,u=a.slice,p=s.toString,d=s.hasOwnProperty,h=Array.isArray,f=Object.keys,g=c.bind,_=Object.create,m=function(){},v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):r._=v,v.VERSION="1.8.3";var y=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)}}return function(){return t.apply(e,arguments)}},b=function(t,e,i){return null==t?v.identity:v.isFunction(t)?y(t,e,i):v.isObject(t)?v.matcher(t):v.property(t)};v.iteratee=function(t,e){return b(t,e,1/0)};var k=function(t,e){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var r=1;n>r;r++)for(var o=arguments[r],a=t(o),s=a.length,c=0;s>c;c++){var l=a[c];e&&void 0!==i[l]||(i[l]=o[l])}return i}},w=function(t){if(!v.isObject(t))return{};if(_)return _(t);m.prototype=t;var e=new m;return m.prototype=null,e},M=function(t){return function(e){return null==e?void 0:e[t]}},x=Math.pow(2,53)-1,$=M("length"),O=function(t){var e=$(t);return"number"==typeof e&&e>=0&&x>=e};v.each=v.forEach=function(t,e,i){e=y(e,i);var n,r;if(O(t))for(n=0,r=t.length;r>n;n++)e(t[n],n,t);else{var o=v.keys(t);for(n=0,r=o.length;r>n;n++)e(t[o[n]],o[n],t)}return t},v.map=v.collect=function(t,e,i){e=b(e,i);for(var n=!O(t)&&v.keys(t),r=(n||t).length,o=Array(r),a=0;r>a;a++){var s=n?n[a]:a;o[a]=e(t[s],s,t)}return o},v.reduce=v.foldl=v.inject=t(1),v.reduceRight=v.foldr=t(-1),v.find=v.detect=function(t,e,i){var n;return n=O(t)?v.findIndex(t,e,i):v.findKey(t,e,i),void 0!==n&&-1!==n?t[n]:void 0},v.filter=v.select=function(t,e,i){var n=[];return e=b(e,i),v.each(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n},v.reject=function(t,e,i){return v.filter(t,v.negate(b(e)),i)},v.every=v.all=function(t,e,i){e=b(e,i);for(var n=!O(t)&&v.keys(t),r=(n||t).length,o=0;r>o;o++){var a=n?n[o]:o;if(!e(t[a],a,t))return!1}return!0},v.some=v.any=function(t,e,i){e=b(e,i);for(var n=!O(t)&&v.keys(t),r=(n||t).length,o=0;r>o;o++){var a=n?n[o]:o;if(e(t[a],a,t))return!0}return!1},v.contains=v.includes=v.include=function(t,e,i,n){return O(t)||(t=v.values(t)),("number"!=typeof i||n)&&(i=0),v.indexOf(t,e,i)>=0},v.invoke=function(t,e){var i=u.call(arguments,2),n=v.isFunction(e);return v.map(t,function(t){var r=n?e:t[e];return null==r?r:r.apply(t,i)})},v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matcher(e))},v.findWhere=function(t,e){return v.find(t,v.matcher(e))},v.max=function(t,e,i){var n,r,o=-1/0,a=-1/0;if(null==e&&null!=t){t=O(t)?t:v.values(t);for(var s=0,c=t.length;c>s;s++)n=t[s],n>o&&(o=n)}else e=b(e,i),v.each(t,function(t,i,n){r=e(t,i,n),(r>a||r===-1/0&&o===-1/0)&&(o=t,a=r)});return o},v.min=function(t,e,i){var n,r,o=1/0,a=1/0;if(null==e&&null!=t){t=O(t)?t:v.values(t);for(var s=0,c=t.length;c>s;s++)n=t[s],o>n&&(o=n)}else e=b(e,i),v.each(t,function(t,i,n){r=e(t,i,n),(a>r||1/0===r&&1/0===o)&&(o=t,a=r)});return o},v.shuffle=function(t){for(var e,i=O(t)?t:v.values(t),n=i.length,r=Array(n),o=0;n>o;o++)e=v.random(0,o),e!==o&&(r[o]=r[e]),r[e]=i[o];return r},v.sample=function(t,e,i){return null==e||i?(O(t)||(t=v.values(t)),t[v.random(t.length-1)]):v.shuffle(t).slice(0,Math.max(0,e))},v.sortBy=function(t,e,i){return e=b(e,i),v.pluck(v.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var C=function(t){return function(e,i,n){var r={};return i=b(i,n),v.each(e,function(n,o){var a=i(n,o,e);t(r,n,a)}),r}};v.groupBy=C(function(t,e,i){v.has(t,i)?t[i].push(e):t[i]=[e]}),v.indexBy=C(function(t,e,i){t[i]=e}),v.countBy=C(function(t,e,i){v.has(t,i)?t[i]++:t[i]=1}),v.toArray=function(t){return t?v.isArray(t)?u.call(t):O(t)?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:O(t)?t.length:v.keys(t).length},v.partition=function(t,e,i){e=b(e,i);var n=[],r=[];return v.each(t,function(t,i,o){(e(t,i,o)?n:r).push(t)}),[n,r]},v.first=v.head=v.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:v.initial(t,t.length-e)},v.initial=function(t,e,i){return u.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},v.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:v.rest(t,Math.max(0,t.length-e))},v.rest=v.tail=v.drop=function(t,e,i){return u.call(t,null==e||i?1:e)},v.compact=function(t){return v.filter(t,v.identity)};var L=function(t,e,i,n){for(var r=[],o=0,a=n||0,s=$(t);s>a;a++){var c=t[a];if(O(c)&&(v.isArray(c)||v.isArguments(c))){e||(c=L(c,e,i));var l=0,u=c.length;for(r.length+=u;u>l;)r[o++]=c[l++]}else i||(r[o++]=c)}return r};v.flatten=function(t,e){return L(t,e,!1)},v.without=function(t){return v.difference(t,u.call(arguments,1))},v.uniq=v.unique=function(t,e,i,n){v.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=b(i,n));for(var r=[],o=[],a=0,s=$(t);s>a;a++){var c=t[a],l=i?i(c,a,t):c;e?(a&&o===l||r.push(c),o=l):i?v.contains(o,l)||(o.push(l),r.push(c)):v.contains(r,c)||r.push(c)}return r},v.union=function(){return v.uniq(L(arguments,!0,!0))},v.intersection=function(t){for(var e=[],i=arguments.length,n=0,r=$(t);r>n;n++){var o=t[n];if(!v.contains(e,o)){for(var a=1;i>a&&v.contains(arguments[a],o);a++);a===i&&e.push(o)}}return e},v.difference=function(t){var e=L(arguments,!0,!0,1);return v.filter(t,function(t){return!v.contains(e,t)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(t){for(var e=t&&v.max(t,$).length||0,i=Array(e),n=0;e>n;n++)i[n]=v.pluck(t,n);return i},v.object=function(t,e){for(var i={},n=0,r=$(t);r>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},v.findIndex=e(1),v.findLastIndex=e(-1),v.sortedIndex=function(t,e,i,n){i=b(i,n,1);for(var r=i(e),o=0,a=$(t);a>o;){var s=Math.floor((o+a)/2);i(t[s])<r?o=s+1:a=s}return o},v.indexOf=i(1,v.findIndex,v.sortedIndex),v.lastIndexOf=i(-1,v.findLastIndex),v.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),o=0;n>o;o++,t+=i)r[o]=t;return r};var j=function(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var o=w(t.prototype),a=t.apply(o,r);return v.isObject(a)?a:o};v.bind=function(t,e){if(g&&t.bind===g)return g.apply(t,u.call(arguments,1));if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");var i=u.call(arguments,2),n=function(){return j(t,n,e,this,i.concat(u.call(arguments)))};return n},v.partial=function(t){var e=u.call(arguments,1),i=function(){for(var n=0,r=e.length,o=Array(r),a=0;r>a;a++)o[a]=e[a]===v?arguments[n++]:e[a];for(;n<arguments.length;)o.push(arguments[n++]);return j(t,i,this,this,o)};return i},v.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=v.bind(t[i],t);return t},v.memoize=function(t,e){var i=function(n){var r=i.cache,o=""+(e?e.apply(this,arguments):n);return v.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return i.cache={},i},v.delay=function(t,e){var i=u.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},v.defer=v.partial(v.delay,v,1),v.throttle=function(t,e,i){var n,r,o,a=null,s=0;i||(i={});var c=function(){s=i.leading===!1?0:v.now(),a=null,o=t.apply(n,r),a||(n=r=null)};return function(){var l=v.now();s||i.leading!==!1||(s=l);var u=e-(l-s);return n=this,r=arguments,0>=u||u>e?(a&&(clearTimeout(a),a=null),s=l,o=t.apply(n,r),a||(n=r=null)):a||i.trailing===!1||(a=setTimeout(c,u)),o}},v.debounce=function(t,e,i){var n,r,o,a,s,c=function(){var l=v.now()-a;e>l&&l>=0?n=setTimeout(c,e-l):(n=null,i||(s=t.apply(o,r),n||(o=r=null)))};return function(){o=this,r=arguments,a=v.now();var l=i&&!n;return n||(n=setTimeout(c,e)),l&&(s=t.apply(o,r),o=r=null),s}},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},v.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},v.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=null),i}},v.once=v.partial(v.before,2);var S=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(t){if(!v.isObject(t))return[];if(f)return f(t);var e=[];for(var i in t)v.has(t,i)&&e.push(i);return S&&n(t,e),e},v.allKeys=function(t){if(!v.isObject(t))return[];var e=[];for(var i in t)e.push(i);return S&&n(t,e),e},v.values=function(t){for(var e=v.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=t[e[r]];return n},v.mapObject=function(t,e,i){e=b(e,i);for(var n,r=v.keys(t),o=r.length,a={},s=0;o>s;s++)n=r[s],a[n]=e(t[n],n,t);return a},v.pairs=function(t){for(var e=v.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=[e[r],t[e[r]]];return n},v.invert=function(t){for(var e={},i=v.keys(t),n=0,r=i.length;r>n;n++)e[t[i[n]]]=i[n];return e},v.functions=v.methods=function(t){var e=[];for(var i in t)v.isFunction(t[i])&&e.push(i);return e.sort()},v.extend=k(v.allKeys),v.extendOwn=v.assign=k(v.keys),v.findKey=function(t,e,i){e=b(e,i);for(var n,r=v.keys(t),o=0,a=r.length;a>o;o++)if(n=r[o],e(t[n],n,t))return n},v.pick=function(t,e,i){var n,r,o={},a=t;if(null==a)return o;v.isFunction(e)?(r=v.allKeys(a),n=y(e,i)):(r=L(arguments,!1,!1,1),n=function(t,e,i){return e in i},a=Object(a));for(var s=0,c=r.length;c>s;s++){var l=r[s],u=a[l];n(u,l,a)&&(o[l]=u)}return o},v.omit=function(t,e,i){if(v.isFunction(e))e=v.negate(e);else{var n=v.map(L(arguments,!1,!1,1),String);e=function(t,e){return!v.contains(n,e)}}return v.pick(t,e,i)},v.defaults=k(v.allKeys,!0),v.create=function(t,e){var i=w(t);return e&&v.extendOwn(i,e),i},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t},v.isMatch=function(t,e){var i=v.keys(e),n=i.length;if(null==t)return!n;for(var r=Object(t),o=0;n>o;o++){var a=i[o];if(e[a]!==r[a]||!(a in r))return!1}return!0};var T=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var r=p.call(t);if(r!==p.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(v.isFunction(a)&&a instanceof a&&v.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var c=i.length;c--;)if(i[c]===t)return n[c]===e;if(i.push(t),n.push(e),o){if(c=t.length,c!==e.length)return!1;for(;c--;)if(!T(t[c],e[c],i,n))return!1}else{var l,u=v.keys(t);if(c=u.length,v.keys(e).length!==c)return!1;for(;c--;)if(l=u[c],!v.has(e,l)||!T(t[l],e[l],i,n))return!1}return i.pop(),n.pop(),!0};v.isEqual=function(t,e){return T(t,e)},v.isEmpty=function(t){return null==t?!0:O(t)&&(v.isArray(t)||v.isString(t)||v.isArguments(t))?0===t.length:0===v.keys(t).length},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=h||function(t){return"[object Array]"===p.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){v["is"+t]=function(e){return p.call(e)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(t){return v.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&t!==+t},v.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===p.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){return null!=t&&d.call(t,e)},v.noConflict=function(){return r._=o,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=M,v.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(e){return v.isMatch(e,t)}},v.times=function(t,e,i){var n=Array(Math.max(0,t));e=y(e,i,1);for(var r=0;t>r;r++)n[r]=e(r);return n},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=v.invert(P),B=function(t){var e=function(e){return t[e]},i="(?:"+v.keys(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}};v.escape=B(P),v.unescape=B(I),v.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),v.isFunction(n)?n.call(t):n};var D=0;v.uniqueId=function(t){var e=++D+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,E=function(t){return"\\"+z[t]};v.template=function(t,e,i){!e&&i&&(e=i),e=v.defaults({},e,v.templateSettings);var n=RegExp([(e.escape||A).source,(e.interpolate||A).source,(e.evaluate||A).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(n,function(e,i,n,a,s){return o+=t.slice(r,s).replace(G,E),r=s+e.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(s){throw s.source=o,s}var c=function(t){return a.call(this,t,v)},l=e.variable||"obj";return c.source="function("+l+"){\n"+o+"}",c},v.chain=function(t){var e=v(t);return e._chain=!0,e};var F=function(t,e){return t._chain?v(e).chain():e};v.mixin=function(t){v.each(v.functions(t),function(e){var i=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),F(this,i.apply(v,t))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];v.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],F(this,i)}}),v.each(["concat","join","slice"],function(t){var e=a[t];v.prototype[t]=function(){return F(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),function(){this.Gmaps={build:function(t,e){var i;return null==e&&(e={}),new(i=_.isFunction(e.handler)?e.handler:Gmaps.Objects.Handler)(t,e)},Builders:{},Objects:{},Google:{Objects:{},Builders:{}}}}.call(this),function(){var t,e=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};t=["extended","included"],this.Gmaps.Base=function(){function i(){}return i.extend=function(i){var n,r,o;for(n in i)o=i[n],e.call(t,n)<0&&(this[n]=o);return null!=(r=i.extended)&&r.apply(this),this},i.include=function(i){var n,r,o;for(n in i)o=i[n],e.call(t,n)<0&&(this.prototype[n]=o);return null!=(r=i.included)&&r.apply(this),this},i}()}.call(this),function(){this.Gmaps.Objects.BaseBuilder=function(){function t(){}return t.prototype.build=function(){return new(this.model_class())(this.serviceObject)},t.prototype.before_init=function(){},t.prototype.after_init=function(){},t.prototype.addListener=function(t,e){return this.primitives().addListener(this.getServiceObject(),t,e)},t.prototype.getServiceObject=function(){return this.serviceObject},t.prototype.primitives=function(){return this.constructor.PRIMITIVES},t.prototype.model_class=function(){return this.constructor.OBJECT},t}()}.call(this),function(){this.Gmaps.Objects.Builders=function(t,e,i){return{build:function(n,r,o){var a;return e.PRIMITIVES=i,t.OBJECT=e,t.PRIMITIVES=i,a=new t(n,r,o),a.build()}}}}.call(this),function(){this.Gmaps.Objects.Handler=function(){function t(t,e){this.type=t,null==e&&(e={}),this.setPrimitives(e),this.setOptions(e),this._cacheAllBuilders(),this.resetBounds()}return t.prototype.buildMap=function(t,e){return null==e&&(e=function(){}),this.map=this._builder("Map").build(t,function(t){return function(){return t._createClusterer(),e()}}(this))},t.prototype.addMarkers=function(t,e){return _.map(t,function(t){return function(i){return t.addMarker(i,e)}}(this))},t.prototype.addMarker=function(t,e){var i;return i=this._builder("Marker").build(t,e,this.marker_options),i.setMap(this.getMap()),this.clusterer.addMarker(i),i},t.prototype.addCircles=function(t,e){return _.map(t,function(t){return function(i){return t.addCircle(i,e)}}(this))},t.prototype.addCircle=function(t,e){return this._addResource("circle",t,e)},t.prototype.addPolylines=function(t,e){return _.map(t,function(t){return function(i){return t.addPolyline(i,e)}}(this))},t.prototype.addPolyline=function(t,e){return this._addResource("polyline",t,e)},t.prototype.addPolygons=function(t,e){return _.map(t,function(t){return function(i){return t.addPolygon(i,e)}}(this))},t.prototype.addPolygon=function(t,e){return this._addResource("polygon",t,e)},t.prototype.addKmls=function(t,e){return _.map(t,function(t){return function(i){return t.addKml(i,e)}}(this))},t.prototype.addKml=function(t,e){return this._addResource("kml",t,e)},t.prototype.removeMarkers=function(t){return _.map(t,function(t){return function(e){return t.removeMarker(e)}}(this))},t.prototype.removeMarker=function(t){return t.clear(),this.clusterer.removeMarker(t)},t.prototype.fitMapToBounds=function(){return this.map.fitToBounds(this.bounds.getServiceObject())},t.prototype.getMap=function(){return this.map.getServiceObject()},t.prototype.setOptions=function(t){return this.marker_options=_.extend(this._default_marker_options(),t.markers),this.builders=_.extend(this._default_builders(),t.builders),this.models=_.extend(this._default_models(),t.models)},t.prototype.resetBounds=function(){return this.bounds=this._builder("Bound").build()},t.prototype.setPrimitives=function(t){return this.primitives=void 0===t.primitives?this._rootModule().Primitives():_.isFunction(t.primitives)?t.primitives():t.primitives},t.prototype.currentInfowindow=function(){return this.builders.Marker.CURRENT_INFOWINDOW},t.prototype._addResource=function(t,e,i){var n;return n=this._builder(t).build(e,i),n.setMap(this.getMap()),n},t.prototype._cacheAllBuilders=function(){var t;return t=this,_.each(["Bound","Circle","Clusterer","Kml","Map","Marker","Polygon","Polyline"],function(e){return t._builder(e)
})},t.prototype._clusterize=function(){return _.isObject(this.marker_options.clusterer)},t.prototype._createClusterer=function(){return this.clusterer=this._builder("Clusterer").build({map:this.getMap()},this.marker_options.clusterer)},t.prototype._default_marker_options=function(){return _.clone({singleInfowindow:!0,maxRandomDistance:0,clusterer:{maxZoom:5,gridSize:50}})},t.prototype._builder=function(t){var e;return t=this._capitalize(t),null==this[e="__builder"+t]&&(this[e]=Gmaps.Objects.Builders(this.builders[t],this.models[t],this.primitives)),this["__builder"+t]},t.prototype._default_models=function(){var t;return t=_.clone(this._rootModule().Objects),this._clusterize()?t:(t.Clusterer=Gmaps.Objects.NullClusterer,t)},t.prototype._capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t.prototype._default_builders=function(){return _.clone(this._rootModule().Builders)},t.prototype._rootModule=function(){return null==this.__rootModule&&(this.__rootModule=Gmaps[this.type]),this.__rootModule},t}()}.call(this),function(){this.Gmaps.Objects.NullClusterer=function(){function t(){}return t.prototype.addMarkers=function(){},t.prototype.addMarker=function(){},t.prototype.clear=function(){},t.prototype.removeMarker=function(){},t}()}.call(this),function(){this.Gmaps.Google.Objects.Common={getServiceObject:function(){return this.serviceObject},setMap:function(t){return this.getServiceObject().setMap(t)},clear:function(){return this.getServiceObject().setMap(null)},show:function(){return this.getServiceObject().setVisible(!0)},hide:function(){return this.getServiceObject().setVisible(!1)},isVisible:function(){return this.getServiceObject().getVisible()},primitives:function(){return this.constructor.PRIMITIVES}}}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Builders.Bound=function(e){function i(){this.before_init(),this.serviceObject=new(this.primitives().latLngBounds),this.after_init()}return t(i,e),i}(Gmaps.Objects.BaseBuilder)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Builders.Circle=function(e){function i(t,e){this.args=t,this.provider_options=null!=e?e:{},this.before_init(),this.serviceObject=this.create_circle(),this.after_init()}return t(i,e),i.prototype.create_circle=function(){return new(this.primitives().circle)(this.circle_options())},i.prototype.circle_options=function(){var t;return t={center:new(this.primitives().latLng)(this.args.lat,this.args.lng),radius:this.args.radius},_.defaults(t,this.provider_options)},i}(Gmaps.Objects.BaseBuilder)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Builders.Clusterer=function(e){function i(t,e){this.args=t,this.options=e,this.before_init(),this.serviceObject=new(this.primitives().clusterer)(this.args.map,[],this.options),this.after_init()}return t(i,e),i}(Gmaps.Objects.BaseBuilder)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Builders.Kml=function(e){function i(t,e){this.args=t,this.provider_options=null!=e?e:{},this.before_init(),this.serviceObject=this.create_kml(),this.after_init()}return t(i,e),i.prototype.create_kml=function(){return new(this.primitives().kml)(this.args.url,this.kml_options())},i.prototype.kml_options=function(){var t;return t={},_.defaults(t,this.provider_options)},i}(Gmaps.Objects.BaseBuilder)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Builders.Map=function(e){function i(t,e){var i;this.before_init(),i=_.extend(this.default_options(),t.provider),this.internal_options=t.internal,this.serviceObject=new(this.primitives().map)(document.getElementById(this.internal_options.id),i),this.on_map_load(e),this.after_init()}return t(i,e),i.prototype.build=function(){return new(this.model_class())(this.serviceObject,this.primitives())},i.prototype.on_map_load=function(t){return this.primitives().addListenerOnce(this.serviceObject,"idle",t)},i.prototype.default_options=function(){return{mapTypeId:this.primitives().mapTypes("ROADMAP"),center:new(this.primitives().latLng)(0,0),zoom:8}},i}(Gmaps.Objects.BaseBuilder)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;this.Gmaps.Google.Builders.Marker=function(i){function n(e,i,n){this.args=e,this.provider_options=null!=i?i:{},this.internal_options=null!=n?n:{},this.infowindow_binding=t(this.infowindow_binding,this),this.before_init(),this.create_marker(),this.create_infowindow_on_click(),this.after_init()}return e(n,i),n.CURRENT_INFOWINDOW=void 0,n.CACHE_STORE={},n.prototype.build=function(){return this.marker=new(this.model_class())(this.serviceObject)},n.prototype.create_marker=function(){return this.serviceObject=new(this.primitives().marker)(this.marker_options())},n.prototype.create_infowindow=function(){return _.isString(this.args.infowindow)?new(this.primitives().infowindow)({content:this.args.infowindow}):null},n.prototype.marker_options=function(){var t,e;return e=this._randomized_coordinates(),t={title:this.args.marker_title,position:new(this.primitives().latLng)(e[0],e[1]),icon:this._get_picture("picture"),shadow:this._get_picture("shadow")},_.extend(this.provider_options,t)},n.prototype.create_infowindow_on_click=function(){return this.addListener("click",this.infowindow_binding)},n.prototype.infowindow_binding=function(){var t;return this._should_close_infowindow()&&this.constructor.CURRENT_INFOWINDOW.close(),this.marker.panTo(),null==this.infowindow&&(this.infowindow=this.create_infowindow()),null!=this.infowindow?(this.infowindow.open(this.getServiceObject().getMap(),this.getServiceObject()),null==(t=this.marker).infowindow&&(t.infowindow=this.infowindow),this.constructor.CURRENT_INFOWINDOW=this.infowindow):void 0},n.prototype._get_picture=function(t){return _.isObject(this.args[t])&&_.isString(this.args[t].url)?this._create_or_retrieve_image(this._picture_args(t)):null},n.prototype._create_or_retrieve_image=function(t){return void 0===this.constructor.CACHE_STORE[t.url]&&(this.constructor.CACHE_STORE[t.url]=new(this.primitives().markerImage)(t.url,t.size,t.origin,t.anchor,t.scaledSize)),this.constructor.CACHE_STORE[t.url]},n.prototype._picture_args=function(t){return{url:this.args[t].url,anchor:this._createImageAnchorPosition(this.args[t].anchor),size:new(this.primitives().size)(this.args[t].width,this.args[t].height),scaledSize:null,origin:null}},n.prototype._createImageAnchorPosition=function(t){return _.isArray(t)?new(this.primitives().point)(t[0],t[1]):null},n.prototype._should_close_infowindow=function(){return this.internal_options.singleInfowindow&&null!=this.constructor.CURRENT_INFOWINDOW},n.prototype._randomized_coordinates=function(){var t,e,i,n,r;return _.isNumber(this.internal_options.maxRandomDistance)?(r=function(){return 2*Math.random()-1},i=this.internal_options.maxRandomDistance*r(),n=this.internal_options.maxRandomDistance*r(),t=parseFloat(this.args.lat)+180/Math.PI*(n/6378137),e=parseFloat(this.args.lng)+90/Math.PI*(i/6378137)/Math.cos(this.args.lat),[t,e]):[this.args.lat,this.args.lng]},n}(Gmaps.Objects.BaseBuilder)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Builders.Polygon=function(e){function i(t,e){this.args=t,this.provider_options=null!=e?e:{},this.before_init(),this.serviceObject=this.create_polygon(),this.after_init()}return t(i,e),i.prototype.create_polygon=function(){return new(this.primitives().polygon)(this.polygon_options())},i.prototype.polygon_options=function(){var t;return t={path:this._build_path()},_.defaults(t,this.provider_options)},i.prototype._build_path=function(){return _.map(this.args,function(t){return function(e){return new(t.primitives().latLng)(e.lat,e.lng)}}(this))},i}(Gmaps.Objects.BaseBuilder)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Builders.Polyline=function(e){function i(t,e){this.args=t,this.provider_options=null!=e?e:{},this.before_init(),this.serviceObject=this.create_polyline(),this.after_init()}return t(i,e),i.prototype.create_polyline=function(){return new(this.primitives().polyline)(this.polyline_options())},i.prototype.polyline_options=function(){var t;return t={path:this._build_path()},_.defaults(t,this.provider_options)},i.prototype._build_path=function(){return _.map(this.args,function(t){return function(e){return new(t.primitives().latLng)(e.lat,e.lng)}}(this))},i}(Gmaps.Objects.BaseBuilder)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Objects.Bound=function(e){function i(t){this.serviceObject=t}return t(i,e),i.include(Gmaps.Google.Objects.Common),i.prototype.extendWith=function(t){var e;return e=_.isArray(t)?t:[t],_.each(e,function(t){return function(e){return e.updateBounds(t)}}(this))},i.prototype.extend=function(t){return this.getServiceObject().extend(this.primitives().latLngFromPosition(t))},i}(Gmaps.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Objects.Circle=function(e){function i(t){this.serviceObject=t}return t(i,e),i.include(Gmaps.Google.Objects.Common),i.prototype.updateBounds=function(t){return t.extend(this.getServiceObject().getBounds().getNorthEast()),t.extend(this.getServiceObject().getBounds().getSouthWest())},i}(Gmaps.Base)}.call(this),function(){this.Gmaps.Google.Objects.Clusterer=function(){function t(t){this.serviceObject=t}return t.prototype.addMarkers=function(t){return _.each(t,function(t){return function(e){return t.addMarker(e)}}(this))},t.prototype.addMarker=function(t){return this.getServiceObject().addMarker(t.getServiceObject())},t.prototype.clear=function(){return this.getServiceObject().clearMarkers()},t.prototype.removeMarker=function(t){return this.getServiceObject().removeMarker(t.getServiceObject())},t.prototype.getServiceObject=function(){return this.serviceObject},t}()}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Objects.Kml=function(e){function i(t){this.serviceObject=t}return t(i,e),i.prototype.updateBounds=function(){},i.prototype.setMap=function(t){return this.getServiceObject().setMap(t)},i.prototype.getServiceObject=function(){return this.serviceObject},i.prototype.primitives=function(){return this.constructor.PRIMITIVES},i}(Gmaps.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Objects.Map=function(e){function i(t){this.serviceObject=t}return t(i,e),i.prototype.getServiceObject=function(){return this.serviceObject},i.prototype.centerOn=function(t){return this.getServiceObject().setCenter(this.primitives().latLngFromPosition(t))},i.prototype.fitToBounds=function(t){return t.isEmpty()?void 0:this.getServiceObject().fitBounds(t)},i.prototype.primitives=function(){return this.constructor.PRIMITIVES},i}(Gmaps.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Objects.Marker=function(e){function i(t){this.serviceObject=t}return t(i,e),i.include(Gmaps.Google.Objects.Common),i.prototype.updateBounds=function(t){return t.extend(this.getServiceObject().position)},i.prototype.panTo=function(){return this.getServiceObject().getMap().panTo(this.getServiceObject().getPosition())},i}(Gmaps.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Objects.Polygon=function(e){function i(t){this.serviceObject=t}return t(i,e),i.include(Gmaps.Google.Objects.Common),i.prototype.updateBounds=function(t){var e,i,n,r,o;for(r=this.serviceObject.getPath().getArray(),o=[],e=0,i=r.length;i>e;e++)n=r[e],o.push(t.extend(n));return o},i}(Gmaps.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;this.Gmaps.Google.Objects.Polyline=function(e){function i(t){this.serviceObject=t}return t(i,e),i.include(Gmaps.Google.Objects.Common),i.prototype.updateBounds=function(t){var e,i,n,r,o;for(r=this.serviceObject.getPath().getArray(),o=[],e=0,i=r.length;i>e;e++)n=r[e],o.push(t.extend(n));return o},i}(Gmaps.Base)}.call(this),function(){this.Gmaps.Google.Primitives=function(){var t;return t={point:google.maps.Point,size:google.maps.Size,circle:google.maps.Circle,latLng:google.maps.LatLng,latLngBounds:google.maps.LatLngBounds,map:google.maps.Map,mapTypez:google.maps.MapTypeId,markerImage:google.maps.MarkerImage,marker:google.maps.Marker,infowindow:google.maps.InfoWindow,listener:google.maps.event.addListener,clusterer:MarkerClusterer,listenerOnce:google.maps.event.addListenerOnce,polyline:google.maps.Polyline,polygon:google.maps.Polygon,kml:google.maps.KmlLayer,addListener:function(e,i,n){return t.listener(e,i,n)},addListenerOnce:function(e,i,n){return t.listenerOnce(e,i,n)},mapTypes:function(e){return t.mapTypez[e]},latLngFromPosition:function(e){return _.isArray(e)?new t.latLng(e[0],e[1]):_.isNumber(e.lat)&&_.isNumber(e.lng)?new t.latLng(e.lat,e.lng):_.isFunction(e.getServiceObject)?e.getServiceObject().getPosition():e}}}}.call(this),function(){}.call(this);var Carmic={init:function(){function t(t,i,n,r){var o=i-t.offset().left-t.width()/2,a=-1*(n-(t.offset().top+20)-t.height()/2),s=Math.atan2(a,o)*(180/Math.PI),c=e(s),l="rotate("+c+"deg)";r.css({"-moz-transform":l,transform:l,"-webkit-transform":l,"-ms-transform":l}),$("#rotate").html(c),$("body").mouseup(function(t){t.stopPropagation(),$("body").unbind("mousemove")})}function e(t){var e=90-t;return e}function i(t){console.log("tet"),console.log(t);var e=0;0>t&&t>=-15?(e=1,console.log("1 hr back")):-16>t&&t>=-30?(e=2,console.log("2 hr back")):-31>=t&&t>=-45?(e=3,console.log("3 hr back")):-46>=t&&t>=-60?(e=4,console.log("4 hr back")):-61>=t&&t>=-75?(e=5,console.log("5 hr back")):-76>=t&&t>=-90?(e=6,console.log("6 hr back")):t>255&&270>t?(e=7,console.log("7 hr back")):t>240&&256>t?(e=8,console.log("8 hr back")):t>225&&241>t?(e=9,console.log("9 hr back")):t>210&&226>t?(e=10,console.log("10 hr back")):t>195&&211>t?(e=11,console.log("11 hr back")):t>180&&196>t?(e=12,console.log("12 hr back")):t>165&&180>t?(e=13,console.log("13 hr back")):t>150&&165>t?(e=14,console.log("14 hr back")):t>135&&150>t?(e=15,console.log("15 hr back")):t>120&&135>t?(e=16,console.log("16 hr back")):t>105&&120>t?(e=17,console.log("17 hr back")):t>90&&105>t?(e=18,console.log("18 hr back")):t>75&&90>t?(e=19,console.log("19 hr back")):t>60&&75>t?(e=20,console.log("20 hr back")):t>45&&60>t?(e=21,console.log("21 hr back")):t>30&&45>t?(e=22,console.log("22 hr back")):t>15&&30>t?(e=23,console.log("23 hr back")):t>0&&15>t&&(e=24,console.log("24 hr back")),topic_filter_by_time(e),$("#back_time").text("back around "+e+"hr")}function n(t){var e=t.getAttribute("topicID");$.ajax({data:{id:e},success:function(t){var e=$(t),i=e.find("#posts_display")[0],n=(new XMLSerializer).serializeToString(i);$("#posts_display").replaceWith(n),$("#posts_display").show();var r=$(".maincontent_wrapper");r[0]&&r.scrollTop(r[0].scrollHeight);var o=$("#posts");o[0]&&o.scrollTop(o[0].scrollHeight)}})}function r(){var t=new Date,e=t.getHours(),i=t.getMinutes(),n=t.getSeconds();i=o(i),n=o(n);var a=e>=12?"pm":"am";e%=12,e=e?e:12,document.getElementById("txt").innerHTML=e+":"+i+":"+n+" "+a;setTimeout(function(){r()},500)}function o(t){return 10>t&&(t="0"+t),t}r(),$(".top-bar").hide(),$("#header").hide();$("body").addClass("full_bg"),$("body").addClass("blur-bgimage"),$(".container").addClass("removebg"),$("#main_background").addClass("removebg"),document.body.style.backgroundImage="none",document.body.style.backgroundColor="#fff",$(document).ready(function(){$("body").mouseup(function(t){t.stopPropagation(),$("body").unbind("mousemove"),console.log("marker mouse up");var e=$("#rotate").text();i(e)})}),$("#marker").on("mousedown",function(){$("body").on("mousemove",function(e){e.stopPropagation(),t($("#innerCircle").parent(),e.pageX,e.pageY,$("#marker"))})}),$("#marker").on("touch",function(){$("#touch").html("touch ....."),$("body").on("touch",function(e){e.stopPropagation(),t($("#innerCircle").parent(),e.pageX,e.pageY,$("#marker"))})}),function(){function t(t){var e=document.getElementById("btn_zoom_in"),i=document.getElementById("btn_zoom_out");t.appendChild(e),t.appendChild(i),google.maps.event.addDomListener(e,"click",function(){handler.getMap().setZoom(handler.getMap().getZoom()+1)}),google.maps.event.addDomListener(i,"click",function(){handler.getMap().setZoom(handler.getMap().getZoom()-1)})}window.CustomZoomControl=t}(),$("#state").click(function(){$("#state").hide(),$("#address").hide(),$("#edit_street").val(""),$("#edit_city").val(""),$("#edit_street").show(),$("#edit_city").show()}),$("#address").click(function(){$("#address").hide(),$("#edit_street").val(""),$("#edit_street").show()}),$("#SignUp").click(function(){var t=$(this).offset().left,e=$(this).offset().top;return $(".modal").dialog({modal:!0,position:[t,e],minHeight:100,closeText:"close",draggable:!1,resizable:!1}).dialog("widget").find(".ui-dialog-titlebar").hide(),!1}),$("#login").click(function(){$("#signin_model").foundation("reveal","open")}),$("#signup").click(function(){$("#myModal").foundation("reveal","open")}),$(".ui-widget-overlay").on("click",function(){$(".modal").dialog("close")}),window.startTime=r,window.showTimeSpinner=showTimeSpinner,window.retrieve_posts=n}};(function(){var t,e=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;this.InfoBoxBuilder=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.create_infowindow=function(){var t;return _.isString(this.args.infowindow)?(t=document.createElement("div"),t.setAttribute("class","marker_container"),t.innerHTML=this.args.infowindow,this.infowindow=new InfoBox(this.infobox(t))):null},i.prototype.infobox=function(t){return{content:t,pixelOffset:new google.maps.Size(-40,-80),boxStyle:{raydius:"10px",width:"70px",background:"rgb(2,166,180)",opacity:.75,padding:"5px",infoBoxClearance:new google.maps.Size(1,1)}}},i.prototype.create_marker=function(){var t;return t=_.extend(this.marker_options(),this.rich_marker_options()),this.serviceObject=new RichMarker(t)},i.prototype.rich_marker_options=function(){var t;return t=document.createElement("div"),t.setAttribute("class","custom_marker_content"),t.innerHTML=this.args.custom_marker,{content:t,shadow:"none"}},i}(Gmaps.Google.Builders.Marker),t=Gmaps.build("Google",{builders:{Marker:InfoBoxBuilder}})}).call(this),RichMarker.prototype=new google.maps.OverlayView,window.RichMarker=RichMarker,RichMarker.prototype.getVisible=function(){return this.get("visible")},RichMarker.prototype.getVisible=RichMarker.prototype.getVisible,RichMarker.prototype.setVisible=function(t){this.set("visible",t)},RichMarker.prototype.setVisible=RichMarker.prototype.setVisible,RichMarker.prototype.visible_changed=function(){this.ready_&&(this.markerWrapper_.style.display=this.getVisible()?"":"none",this.draw())},RichMarker.prototype.visible_changed=RichMarker.prototype.visible_changed,RichMarker.prototype.setFlat=function(t){this.set("flat",!!t)},RichMarker.prototype.setFlat=RichMarker.prototype.setFlat,RichMarker.prototype.getFlat=function(){return this.get("flat")},RichMarker.prototype.getFlat=RichMarker.prototype.getFlat,RichMarker.prototype.getWidth=function(){return this.get("width")},RichMarker.prototype.getWidth=RichMarker.prototype.getWidth,RichMarker.prototype.getHeight=function(){return this.get("height")},RichMarker.prototype.getHeight=RichMarker.prototype.getHeight,RichMarker.prototype.setShadow=function(t){this.set("shadow",t),this.flat_changed()},RichMarker.prototype.setShadow=RichMarker.prototype.setShadow,RichMarker.prototype.getShadow=function(){return this.get("shadow")},RichMarker.prototype.getShadow=RichMarker.prototype.getShadow,RichMarker.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?"":this.getShadow())},RichMarker.prototype.flat_changed=RichMarker.prototype.flat_changed,RichMarker.prototype.setZIndex=function(t){this.set("zIndex",t)},RichMarker.prototype.setZIndex=RichMarker.prototype.setZIndex,RichMarker.prototype.getZIndex=function(){return this.get("zIndex")},RichMarker.prototype.getZIndex=RichMarker.prototype.getZIndex,RichMarker.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())},RichMarker.prototype.zIndex_changed=RichMarker.prototype.zIndex_changed,RichMarker.prototype.getDraggable=function(){return this.get("draggable")},RichMarker.prototype.getDraggable=RichMarker.prototype.getDraggable,RichMarker.prototype.setDraggable=function(t){this.set("draggable",!!t)},RichMarker.prototype.setDraggable=RichMarker.prototype.setDraggable,RichMarker.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())},RichMarker.prototype.draggable_changed=RichMarker.prototype.draggable_changed,RichMarker.prototype.getPosition=function(){return this.get("position")},RichMarker.prototype.getPosition=RichMarker.prototype.getPosition,RichMarker.prototype.setPosition=function(t){this.set("position",t)},RichMarker.prototype.setPosition=RichMarker.prototype.setPosition,RichMarker.prototype.position_changed=function(){this.draw()},RichMarker.prototype.position_changed=RichMarker.prototype.position_changed,RichMarker.prototype.getAnchor=function(){return this.get("anchor")},RichMarker.prototype.getAnchor=RichMarker.prototype.getAnchor,RichMarker.prototype.setAnchor=function(t){this.set("anchor",t)},RichMarker.prototype.setAnchor=RichMarker.prototype.setAnchor,RichMarker.prototype.anchor_changed=function(){this.draw()},RichMarker.prototype.anchor_changed=RichMarker.prototype.anchor_changed,RichMarker.prototype.htmlToDocumentFragment_=function(t){var e=document.createElement("DIV");if(e.innerHTML=t,1==e.childNodes.length)return e.removeChild(e.firstChild);for(var i=document.createDocumentFragment();e.firstChild;)i.appendChild(e.firstChild);return i},RichMarker.prototype.removeChildren_=function(t){if(t)for(var e;e=t.firstChild;)t.removeChild(e)},RichMarker.prototype.setContent=function(t){this.set("content",t)},RichMarker.prototype.setContent=RichMarker.prototype.setContent,RichMarker.prototype.getContent=function(){return this.get("content")},RichMarker.prototype.getContent=RichMarker.prototype.getContent,RichMarker.prototype.content_changed=function(){if(this.markerContent_){this.removeChildren_(this.markerContent_);var t=this.getContent();if(t){"string"==typeof t&&(t=t.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),t=this.htmlToDocumentFragment_(t)),this.markerContent_.appendChild(t);for(var e,i=this,n=this.markerContent_.getElementsByTagName("IMG"),r=0;e=n[r];r++)google.maps.event.addDomListener(e,"mousedown",function(t){i.getDraggable()&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1)}),google.maps.event.addDomListener(e,"load",function(){i.draw()});google.maps.event.trigger(this,"domready")}this.ready_&&this.draw()}},RichMarker.prototype.content_changed=RichMarker.prototype.content_changed,RichMarker.prototype.setCursor_=function(t){if(this.ready_){var e="";-1!==navigator.userAgent.indexOf("Gecko/")?("dragging"==t&&(e="-moz-grabbing"),"dragready"==t&&(e="-moz-grab"),"draggable"==t&&(e="pointer")):(("dragging"==t||"dragready"==t)&&(e="move"),"draggable"==t&&(e="pointer")),this.markerWrapper_.style.cursor!=e&&(this.markerWrapper_.style.cursor=e)}},RichMarker.prototype.startDrag=function(t){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var e=this.getMap();this.mapDraggable_=e.get("draggable"),e.set("draggable",!1),this.mouseX_=t.clientX,this.mouseY_=t.clientY,this.setCursor_("dragready"),this.markerWrapper_.style.MozUserSelect="none",this.markerWrapper_.style.KhtmlUserSelect="none",this.markerWrapper_.style.WebkitUserSelect="none",this.markerWrapper_.unselectable="on",this.markerWrapper_.onselectstart=function(){return!1},this.addDraggingListeners_(),google.maps.event.trigger(this,"dragstart")}},RichMarker.prototype.stopDrag=function(){this.getDraggable()&&this.dragging_&&(this.dragging_=!1,this.getMap().set("draggable",this.mapDraggable_),this.mouseX_=this.mouseY_=this.mapDraggable_=null,this.markerWrapper_.style.MozUserSelect="",this.markerWrapper_.style.KhtmlUserSelect="",this.markerWrapper_.style.WebkitUserSelect="",this.markerWrapper_.unselectable="off",this.markerWrapper_.onselectstart=function(){},this.removeDraggingListeners_(),this.setCursor_("draggable"),google.maps.event.trigger(this,"dragend"),this.draw())},RichMarker.prototype.drag=function(t){if(!this.getDraggable()||!this.dragging_)return void this.stopDrag();var e=this.mouseX_-t.clientX,i=this.mouseY_-t.clientY;this.mouseX_=t.clientX,this.mouseY_=t.clientY;var n=parseInt(this.markerWrapper_.style.left,10)-e,r=parseInt(this.markerWrapper_.style.top,10)-i;this.markerWrapper_.style.left=n+"px",this.markerWrapper_.style.top=r+"px";var o=this.getOffset_(),a=new google.maps.Point(n-o.width,r-o.height),s=this.getProjection();this.setPosition(s.fromDivPixelToLatLng(a)),this.setCursor_("dragging"),google.maps.event.trigger(this,"drag")},RichMarker.prototype.removeDragListeners_=function(){this.draggableListener_&&(google.maps.event.removeListener(this.draggableListener_),delete this.draggableListener_),this.setCursor_("")},RichMarker.prototype.addDragging_=function(t){if(t){var e=this;this.draggableListener_=google.maps.event.addDomListener(t,"mousedown",function(t){e.startDrag(t)}),this.setCursor_("draggable")}},RichMarker.prototype.addDraggingListeners_=function(){var t=this;this.markerWrapper_.setCapture?(this.markerWrapper_.setCapture(!0),this.draggingListeners_=[google.maps.event.addDomListener(this.markerWrapper_,"mousemove",function(e){t.drag(e)},!0),google.maps.event.addDomListener(this.markerWrapper_,"mouseup",function(){t.stopDrag(),t.markerWrapper_.releaseCapture()},!0)]):this.draggingListeners_=[google.maps.event.addDomListener(window,"mousemove",function(e){t.drag(e)},!0),google.maps.event.addDomListener(window,"mouseup",function(){t.stopDrag()},!0)]},RichMarker.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var t,e=0;t=this.draggingListeners_[e];e++)google.maps.event.removeListener(t);this.draggingListeners_.length=0}},RichMarker.prototype.getOffset_=function(){var t=this.getAnchor();if("object"==typeof t)return t;var e=new google.maps.Size(0,0);if(!this.markerContent_)return e;var i=this.markerContent_.offsetWidth,n=this.markerContent_.offsetHeight;switch(t){case RichMarkerPosition.TOP_LEFT:break;case RichMarkerPosition.TOP:e.width=-i/2;break;case RichMarkerPosition.TOP_RIGHT:e.width=-i;break;case RichMarkerPosition.LEFT:e.height=-n/2;break;case RichMarkerPosition.MIDDLE:e.width=-i/2,e.height=-n/2;break;case RichMarkerPosition.RIGHT:e.width=-i,e.height=-n/2;break;case RichMarkerPosition.BOTTOM_LEFT:e.height=-n;break;case RichMarkerPosition.BOTTOM:e.width=-i/2,e.height=-n;break;case RichMarkerPosition.BOTTOM_RIGHT:e.width=-i,e.height=-n}return e},RichMarker.prototype.onAdd=function(){if(this.markerWrapper_||(this.markerWrapper_=document.createElement("DIV"),this.markerWrapper_.style.position="absolute"),this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex()),this.markerWrapper_.style.display=this.getVisible()?"":"none",!this.markerContent_){this.markerContent_=document.createElement("DIV"),this.markerWrapper_.appendChild(this.markerContent_);var t=this;google.maps.event.addDomListener(this.markerContent_,"click",function(){google.maps.event.trigger(t,"click")}),google.maps.event.addDomListener(this.markerContent_,"mouseover",function(){google.maps.event.trigger(t,"mouseover")}),google.maps.event.addDomListener(this.markerContent_,"mouseout",function(){google.maps.event.trigger(t,"mouseout")})}this.ready_=!0,this.content_changed(),this.flat_changed(),this.draggable_changed();var e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.markerWrapper_),google.maps.event.trigger(this,"ready")},RichMarker.prototype.onAdd=RichMarker.prototype.onAdd,RichMarker.prototype.draw=function(){if(this.ready_&&!this.dragging_){var t=this.getProjection();if(t){var e=this.get("position"),i=t.fromLatLngToDivPixel(e),n=this.getOffset_();this.markerWrapper_.style.top=i.y+n.height+"px",this.markerWrapper_.style.left=i.x+n.width+"px";var r=this.markerContent_.offsetHeight,o=this.markerContent_.offsetWidth;o!=this.get("width")&&this.set("width",o),r!=this.get("height")&&this.set("height",r)}}},RichMarker.prototype.draw=RichMarker.prototype.draw,RichMarker.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_),this.removeDragListeners_()},RichMarker.prototype.onRemove=RichMarker.prototype.onRemove;var RichMarkerPosition={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};window.RichMarkerPosition=RichMarkerPosition;var swapping=!1;!function(t){t.fn.extend({swap:function(e){var i={target:"",speed:1e3,opacity:"1",callback:function(){}},e=t.extend(i,e);return this.each(function(){var i=t(this);if(""!=e.target&&!swapping){swapping=!0;var n=i.css("position"),r=t("#"+e.target).css("position");"relative"!=n&&"absolute"!=n&&i.css("position","relative"),"relative"!=r&&"absolute"!=r&&t("#"+e.target).css("position","relative");var o=i.offset(),a=o.top,s=t("#"+e.target).offset(),c=s.top,l="-",u="-";if(c>=a)var l="+",p=c-a;else var p=a-c;u="-"==l?"+":"-";var o=i.offset(),d=o.left,s=t("#"+e.target).offset(),h=s.left,f="-",g="-";if(h>=d)var f="+",_=h-d;else var _=d-h;g="-"==f?"+":"-",i.animate({opacity:e.opacity},100,function(){i.animate({top:l+"="+p+"px",left:f+"="+_+"px"},e.speed,function(){i.animate({opacity:"1"},100)})}),t("#"+e.target).animate({opacity:e.opacity},100,function(){t("#"+e.target).animate({top:u+"="+p+"px",left:g+"="+_+"px"},e.speed,function(){t("#"+e.target).animate({opacity:"1"},100,function(){swapping=!1,e.callback.call(this)})})})}})}})}(jQuery);